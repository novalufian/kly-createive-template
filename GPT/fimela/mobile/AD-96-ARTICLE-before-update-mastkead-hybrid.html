<!-- GPT MOBILE ARTICLE -->
<style>.google-auto-placed{display: none !important;}</style>
<style>
div#div-gpt-ad-hl-placeholder {margin: 10px -15px !important;min-height: 135px !important;width: unset !important;}
</style>
<script type="module">
    import {initializeApp} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import {getAnalytics, logEvent} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
    import {getRemoteConfig, fetchAndActivate, getValue} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-remote-config.js";
    const firebaseConfig = {
        apiKey: "AIzaSyDGt_EBulRPrTRA5fyA8mTJy4oyu-bxXYE",
        authDomain: "kly-all-vertical.firebaseapp.com",
        projectId: "kly-all-vertical",
        storageBucket: "kly-all-vertical.appspot.com",
        messagingSenderId: "1031270433652",
        appId: "1:1031270433652:web:ecaa223f7397c59bca6221",
        measurementId: "G-YV9LXF9F74"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const remoteConfig = getRemoteConfig(app);

    //load modul to window object
    window.fbase = {
        app: app,
        analytics: analytics,
        remoteConfig: remoteConfig,
        logEvent: (key, val) => {
            return logEvent(analytics, key, val)
        },
        fetchAndActivate: fetchAndActivate,
        getValue: (key) => {
            return getValue(key)
        }
    } 
</script>
<script>
    var urlParams = new URLSearchParams(window.location.search);
</script>

<!--TABOOLA HOTFIX START-->
<script type="text/javascript">
    $(document).ready(function() {
        $('#taboola-mid-article-thumbnails').parent().html(function(index, html) {
            return html.replace('src=""', '');
        });
        if ($('#div-gpt-ad-exposer-placeholder').length) {
            $('#taboola-mid-article-thumbnails').parent().insertBefore('#div-gpt-ad-exposer-placeholder');
        }
    });
</script>
<!--TABOOLA HOTFIX END-->

<!-- MOBILE FIMELA.COM ARTICLE -->
<script>
  	var GAMfilteredTagSlug = ['orgasme-pada-wanita','kelamin-pria','shemale','kama-sutra','foto-telanjang','mesum','pijat-sensual','pabrik-boneka-seks','vagina-bersih','bdsm','janda-seksi','sex-tips','berhubungan-intim-saat-hamil','ereksi-penis','model-telanjang-di-jerman','kamasutra','model-telanjang-di-jerman','janda-seksi'];
    var GAMFilteredArticleId = [3833452, 3843088, 3826269, 3756671, 3848718, 3701967];
  	var GAMTurnOffAds = false;
    if((kmklabs.pageType == "TagPage" && GAMfilteredTagSlug.includes(kmklabs.tag.slug)) || (kmklabs.article && GAMFilteredArticleId.includes(kmklabs.article.id)) ){
      console.log('Mature Content!');    
      GAMTurnOffAds = true;
    }
  
    /* TOPFRAME SHIRNKING v8 */
    var _adsvisible_ = {
        "topframe" : false,
        "topframeClassTweak" : false,
        "topframeScrollBackToTop" : false,
    }

    var _PARENT_BODY_ = null;
    var _PARENT_BODY_TARGET_ = null;
    var _TOPFRAME_PARENT_WRAPPER_ = null;
    var _TOPFRAME_WRAPPER_ = null;
    var _TOPFRAME_STICKY_ = false;
    var _TOPFRAME_STICKY_END_ = false;
    var _TOPFRAME_STICKY_LAST_SCROLL_ = 0;
    var _TOPFRAME_STICKY_LAST_SCROLL_END_ = 0;
    var _TOPFRAME_STICKY_SCROLL_SPEED_ = 10;
    var _TOPFRAME_STICKY_TIME_ = 7;
    var _TOPFRAME_STICKY_IS_READY_ = false;
    var _TOPFRAME_STICKY_ADUNIT_TARGET_ = "#div-gpt-ad-fimela-topfrm";
    var _TOPFRAME_STICKY_TYPE_ = null;

    var _turnOff_ = false;
    var _IS_IOS_ = parent.window.navigator.platform.match(/iPhone|iPod|iPad/);
    var _ORINETATION_ = (_IS_IOS_) ? parent.window.orientation : parent.screen.orientation.angle;

    var _TOPFRAME_STICKY_CUSTOM_STYLE_ = document.createElement("style");
    /* TOPFRAME SHIRNKING v8 */
    
    /*PROTOTYPE CUSTOM FILTERING*/
    String.prototype.klyFiltering = function(delimiter) {
        return this.trim().split(delimiter).map(function(t) {
            return t.trim().toLowerCase()
        }).filter(x => x != "");
    };
		/*TTD SETTINGS - START*/
    // window.uid2_settings={UID2_BASE_URL:"https://sg.prod.uidapi.com",SERVER_PUBLIC_KEY:"UID2-X-P-MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAErJteoXafwuvaFfhbPyHrM28q1ndSq4z4ozoTTo10K7LUPq2BaD6I548x8in/hNwEV6JvCaofdFOJtsV3WGrV2g==",SUBSCRIPTION_ID:"gk8wCgxku5"};const GET_UID2_COOKIE=document.cookie.split(";").find(a=>a.match(/(kly_uidmail|kly_uidphone)=/ig)),KLY_UID2=!!GET_UID2_COOKIE&&GET_UID2_COOKIE.trim().split(/(kly_uidmail|kly_uidphone)=/ig).filter(a=>a);
    /*TTD SETTINGS - END */
  
    /** LOAD PREBID - START */
    /** START - PREBID INITIATE CLASS  */
    class PrebidInstantiate {
        constructor(timeout, fstimeout, hbtimeout, adunitDisplay, adunitVideo, price) {
            this.PREBID_TIMEOUT = timeout;
            this.FAILSAFE_TIMEOUT = fstimeout;
            this.HB_TIMEOUT = hbtimeout;
            this.ADUNITDISPLAY = adunitDisplay;
            this.ADUNITVIDEO = adunitVideo;
            this.PRICE = price;
            this.pushBid();
            this.failsafePrebid();
        }

        failsafePrebid() {
            let that = this;
            setTimeout(function() {
                that.initAdserver();
            }, this.FAILSAFE_TIMEOUT);
        }
        pushBid() {
            pbjs.que.push(() => {
//               	const uidType = KLY_UID2 && KLY_UID2[0] === 'kly_uidmail' ? {
//                     emailHash: KLY_UID2[1]
//                 } : {
//                     phoneHash: KLY_UID2[1]
//                 };

//                 const cstgParams = KLY_UID2 ? {
//                     ...uidType,
//                     subscriptionId: `${window.uid2_settings.SUBSCRIPTION_ID}`,
//                     serverPublicKey: `${window.uid2_settings.SERVER_PUBLIC_KEY}`,
//                 } : {};
//                 const uid2Params = {
//                     uid2ApiBase: `${window.uid2_settings.UID2_BASE_URL}`,
//                     ...cstgParams,
//                 };
                pbjs.addAdUnits(this.ADUNITDISPLAY);
                pbjs.addAdUnits(this.ADUNITVIDEO);
                pbjs.setConfig({
                  	// userSync: {
                  	// userIds: [{
                  	// name: 'uid2',
                  	// params: uid2Params,
                  	// }, ],
                  	// syncDelay: 5000,
                  	// auctionDelay: 1000,
                  	// },
                    priceGranularity: this.PRICE,
                    enableSendAllBids: true,
                    cache: {
                        url: 'https://prebid.adnxs.com/pbc/v1/cache'
                    },
                  	enableTIDs: true, deviceAccess: true, storageAllowed: true,
                    // bidderTimeout: 2000,
                });
                pbjs.requestBids({
                    bidsBackHandler: this.initAdserver,
                    timeout: this.PREBID_TIMEOUT,
                });
            });
        }

        initAdserver() {
            if (pbjs.initAdserverSet) return;
            pbjs.initAdserverSet = true;

            // Get all of the adUnit codes for the display adUnits
            var displayAdUnitCodes = [];
            adUnitsDisplay.forEach(function(adUnit) {
                displayAdUnitCodes.push(adUnit.code);
                //console.log(adUnit.code);
            });

            googletag.cmd.push(function() {
                pbjs.que.push(function() {
                    pbjs.setTargetingForGPTAsync(displayAdUnitCodes);
                    googletag.pubads().refresh([window.GAMLibrary.showcase, window.GAMLibrary.exposer1]);
                });
            });

        }
    }
    /** START - PREBID INITIATE CLASS  */

    /** START - PREBID INIT, CONFIGURATION & GOOGLE INIT   */
    const priceGranularityConfig = {
        buckets: [{
            precision: 2,
            min: 0.02,
            max: 0.99,
            increment: 0.01
        }, {
            precision: 2,
            min: 1,
            max: 10,
            increment: 0.1
        }, ],
    };
    var gptadslots = [];
    var googletag = googletag || {};
    var pbjs = pbjs || {};
    var adUnitsDisplay = [{
             code: "div-gpt-ad-fimela-sc-1",
             mediaTypes: {
                 banner: {
                     sizes: [
                         [300, 250],
                         [250, 250],
                         [200, 200],
                     ],
                 },
         
             },
             bids: [{
                 bidder: "innity",
                 params: {
                     zone: 97854,
                     pub: 536
                 }
             },{
                 bidder: "teads",
                 params: {
                     pageId: 151756,
                     placementId: 167827
                 }
             },{
                 bidder: "rubicon",
                 params: {
                     accountId: 12534,
                     siteId: 377678,
                     zoneId: 2083798
                 }
             }, {
                 bidder: 'pubmatic',
                 params: {
                     publisherId: '156536',
                     adSlot: 'Prebid-Fimela-Mobile-300x250_1'
                 }
             }, {
                 bidder: 'unruly',
                 params: {
                     siteId: 243584
                 }
             }, {
                 bidder: 'medianet',
                 params: {
                     cid: '8CUWX4UX4',
                     crid: '576550861'
                 }
             }, {
                 bidder: 'smartadserver',
                 params: {
                     domain: 'https://prg-apac.smartadserver.com',
                     networkId: 4221,
                     siteId: 498332,
                     pageId: 1556524,
                     formatId: 111310
                 }
             }, {
                 bidder: "openx",
                 params: {
                     delDomain: "emtek-d.openx.net",
                     unit: "556894074"
                 }
             },
             { bidder: "yahoossp", params: { dcn: '8a969d80018383b1b722c650cea4023c', pos: '8a9695bc018383b1c995c6510d7a024c' } },
             { bidder: "taboola", params: { tagId: 'showcase_homepage_1', publisherId: '1501404', } },
             { bidder: 'criteo', params: { zoneId: 1789607 }},
             // { bidder: 'smilewanted', params: { zoneId: 'emtek.digital_hb_display' }},
             { bidder: 'eskimi', params: { placementId: 2003 }},
             { bidder: 'r2b2',params: {pid: 'm.fimela.com/prebid/300x250/1'}},
             { bidder: 'adkernel',params: {zoneId: '230696',host: 'cpm.appocean.media'}}
             ],
         }, {
             code: "div-gpt-ad-fimela-hl-1",
             mediaTypes: {
                 banner: {
                     sizes: [
                         [320, 50],
                         [320, 100],
                     ],
                 },
         
             },
             bids: [{
                 bidder: "innity",
                 params: {
                     zone: 97853,
                     pub: 536
                 }
             }, {
                 bidder: "rubicon",
                 params: {
                     accountId: 12534,
                     siteId: 377678,
                     zoneId: 2083798
                 }
             }, {
                 bidder: 'pubmatic',
                 params: {
                     publisherId: '156536',
                     adSlot: 'Prebid-Fimela-Mobile-320x50_1'
                 }
             }, {
                 bidder: 'medianet',
                 params: {
                     cid: '8CUWX4UX4',
                     crid: '888142531'
                 }
             }, {
                 bidder: 'smartadserver',
                 params: {
                     domain: 'https://prg-apac.smartadserver.com',
                     networkId: 4221,
                     siteId: 498332,
                     pageId: 1556524,
                     formatId: 111312
                 }
             }, {
                 bidder: "openx",
                 params: {
                     delDomain: "emtek-d.openx.net",
                     unit: "556894072"
                 }
             }, {
                 bidder: 'ix',
                 params: {
                     siteId: '802750'
                 }
             },
             { bidder: "yahoossp", params: { dcn: '8a969d80018383b1b722c650cea4023c', pos: '8a969d80018383b1b722c6518c46023f' } },
             { bidder: "taboola", params: { tagId: 'headline_homepage_1', publisherId: '1501404', } },
             { bidder: 'criteo', params: { zoneId: 1789607 }},
             // { bidder: 'smilewanted', params: { zoneId: 'emtek.digital_hb_display' }},
             { bidder: 'eskimi', params: { placementId: 2004 }},
             { bidder: 'r2b2',params: {pid: 'm.fimela.com/prebid/320x100/1'}},
             { bidder: 'adkernel',params: {zoneId: '230696',host: 'cpm.appocean.media'}}
             ],
         }, {
             code: "div-gpt-ad-fimela-bottomfrm",
             mediaTypes: {
                 banner: {
                     sizes: [
                         [320, 50],
                         [320, 100],
                     ],
                 },
             },
             bids: [{
                 bidder: "innity",
                 params: {
                     zone: 98049,
                     pub: 536
                 }
             }, {
                 bidder: "rubicon",
                 params: {
                     accountId: 12534,
                     siteId: 377678,
                     zoneId: 2083798
                 }
             }, {
                 bidder: 'medianet',
                 params: {
                     cid: '8CUWX4UX4',
                     crid: '986414413'
                 }
             }, {
                 bidder: "openx",
                 params: {
                     delDomain: "emtek-d.openx.net",
                     unit: "556894067"
                 }
             }, {
                 bidder: 'ix',
                 params: {
                     siteId: '802739'
                 }
             },
             { bidder: "yahoossp", params: { dcn: '8a969d80018383b1b722c650cea4023c', pos: '8a96992f018383b1c311c651cf750247' } },
             { bidder: "taboola", params: { tagId: 'bottomfrm_homepage_1', publisherId: '1501404', } },
             { bidder: 'criteo', params: { zoneId: 1789607 }},
             // { bidder: 'smilewanted', params: { zoneId: 'emtek.digital_hb_display' }},
             { bidder: 'eskimi', params: { placementId: 2002 }},
             { bidder: 'r2b2',params: {pid: 'm.fimela.com/prebid/320x100_2/1'}},
             { bidder: 'adkernel',params: {zoneId: '230696',host: 'cpm.appocean.media'}}
             ],
         }, {
             code: "div-gpt-ad-fimela-dfp-exposer-slot1-oop",
             mediaTypes: {
                 banner: {
                     sizes: [
                         [300, 250],
                         [300, 600],
                         [320, 480],
                         [160, 600],
                         [250, 250],
                     ],
                 },
         
             },
             bids: [{
                 bidder: "innity",
                 params: {
                     zone: 98050,
                     pub: 536
                 }
             },{
                 bidder: "teads",
                 params: {
                     pageId: 153514,
                     placementId: 167826
                 }
             },{
                 bidder: "rubicon",
                 params: {
                     accountId: 12534,
                     siteId: 377678,
                     zoneId: 2083798
                 }
             }, {
                 bidder: 'pubmatic',
                 params: {
                     publisherId: '156536',
                     adSlot: 'Prebid-Fimela-Mobile-300x600'
                 }
             }, {
                 bidder: 'unruly',
                 params: {
                     siteId: 243584
                 }
             }, {
                 bidder: 'medianet',
                 params: {
                     cid: '8CUWX4UX4',
                     crid: '123558562'
                 }
             }, {
                 bidder: 'smartadserver',
                 params: {
                     domain: 'https://prg-apac.smartadserver.com',
                     networkId: 4221,
                     siteId: 498332,
                     pageId: 1556524,
                     formatId: 111311
                 }
             }, {
                 bidder: "openx",
                 params: {
                     delDomain: "emtek-d.openx.net",
                     unit: "556894069"
                 }
             }, {
                 bidder: 'ix',
                 params: {
                     siteId: '802751'
                 }
             },
             { bidder: "yahoossp", params: { dcn: '8a969d80018383b1b722c650cea4023c', pos: '8a96992f018383b1c311c65152410246' } },
             { bidder: "taboola", params: { tagId: 'exposer_homepage_1', publisherId: '1501404', } },
             { bidder: 'criteo', params: { zoneId: 1789607 }},
             // { bidder: 'smilewanted', params: { zoneId: 'emtek.digital_hb_display' }},
             { bidder: 'eskimi', params: { placementId: 2005 }},
             { bidder: 'r2b2',params: {pid: 'm.fimela.com/prebid/300x600/1'}},
             { bidder: 'adkernel',params: {zoneId: '230696',host: 'cpm.appocean.media'}}
             ],
         }, ];
    var adUnitsVideo = [{
        code: "div-gpt-ad-fimela-hl-1",
        mediaTypes: {
            video: {
                playerSize: [640, 360],
                context: "outstream",
                protocols: [2, 3, 5, 6, 7],
                api: [2, 3, 7],
                minduration: 4,
                maxduration: 30,
                mimes: ["video/mp4", "video/x-ms-wmv", "application/javascript", "video/3gpp", "application/x-mpegURL", "video/quicktime", "video/x-msvideo", "video/x-flv", "video/webm"],
                placement: 3
            },
        },
        bids: [{
            bidder: 'ix',
            params: {
                siteId: '802750'
            }
        }, ],
    }, {
        code: "div-gpt-ad-fimela-bottomfrm",
        mediaTypes: {
            video: {
                playerSize: [640, 360],
                context: "outstream",
                protocols: [2, 3, 5, 6, 7],
                api: [2, 3, 7],
                minduration: 4,
                maxduration: 30,
                mimes: ["video/mp4", "video/x-ms-wmv", "application/javascript", "video/3gpp", "application/x-mpegURL", "video/quicktime", "video/x-msvideo", "video/x-flv", "video/webm"],
                placement: 3
            },
        },
        bids: [{
            bidder: 'pubmatic',
            params: {
                publisherId: '156536',
                videoAdUnit: '4045175',
                adSlot: 'kly_prebid_outstream_mobile_fimela',
                outstreamAU: 'kly_prebid_outstream_mobile_fimela',
                video: {
                    skippable: false,
                    playbackmethod: [2],
                    context: "outstream",
                    api: [2, 7],
                    minduration: 5,
                    maxduration: 30,
                    mimes: ["video/mp4", "video/x-ms-wmv", "application/javascript", "video/3gpp", "application/x-mpegURL", "video/quicktime", "video/x-msvideo", "video/x-flv", "video/webm"],
                    placement: 3
                }
            }
        }, ],
    }, {
        code: "div-gpt-ad-fimela-dfp-exposer-slot1-oop",
        mediaTypes: {
            video: {
                playerSize: [640, 360],
                context: "outstream",
                protocols: [2, 3, 5, 6, 7],
                api: [2, 3, 7],
                minduration: 4,
                maxduration: 30,
                mimes: ["video/mp4", "video/x-ms-wmv", "application/javascript", "video/3gpp", "application/x-mpegURL", "video/quicktime", "video/x-msvideo", "video/x-flv", "video/webm"],
                placement: 3
            },
        },
        bids: [{
            bidder: 'ix',
            params: {
                siteId: '802751'
            }
        }, ],
    }, ];

		pbjs.bidderSettings = {
        innity: {
            storageAllowed: true
        },
        teads: {
            storageAllowed: true
        },
        rubicon: {
            storageAllowed: true
        },
        pubmatic: {
            storageAllowed: true
        },
        unruly: {
            storageAllowed: true
        },
        medianet: {
            storageAllowed: true
        },
        smartadserver: {
            storageAllowed: true
        },
        openx: {
            storageAllowed: true
        },
        yahoossp: {
            storageAllowed: true
        },
        taboola: {
            storageAllowed: true
        },
        criteo: {
            storageAllowed: true
        },
        ix: {
            storageAllowed: true
        }
    }
  
    pbjs.que = pbjs.que || [];
    googletag.cmd = googletag.cmd || [];
    /** END - PREBID INIT, CONFIGURATION & GOOGLE INIT   */

    /** LOAD PREBID - END */

    var gpt_gam_site = window.location.hostname.toUpperCase(),
        gpt_gam_ver = 'V5-ADS';

    /* INIT CONFIG */
    window.GAMLibrary = {};
    window.GAMLibrary = {
        dfpSlideup: '/36504930/KLY/MOBILE/FIMELA.COM/SLIDE_UP',
        dfpExposer1: '/36504930/KLY/MOBILE/FIMELA.COM/EXPOSER',
        dfpBottomFrame: '/36504930/KLY/MOBILE/FIMELA.COM/BOTTOM_FRAME',
        dfpFloatingPin: '/36504930/KLY/MOBILE/FIMELA.COM/FLOATING_PIN',
        dfpTopFrame: '/36504930/KLY/MOBILE/FIMELA.COM/MASTHEAD',
        dfpHeadline: '/36504930/KLY/MOBILE/FIMELA.COM/HEADLINE',
        dfpInterstitial: '/36504930/KLY/MOBILE/FIMELA.COM/INTERSTITIAL',
        timedBottomFrm: null,
        timedFloatingPin: null,
        tags: '',
        infiniteSCId: 1,
        generatedScrollBF: 0,
        generatedScrollFP: 0,
        topFrameFixedSize: 1,
        articleType: {
            "TextTypeArticle": {
                'scroll': 50
            },
            "VideoGallery": {
                'scroll': 50
            },
            "photoObjectLoader": {
                'scroll': 50
            },
            "PhotoGallery": {
                'scroll': 0
            },
            "default": {
                'scroll': 50
            },
        },
        setGamBFInterval: function(active = true, intervalTime = 60000) {
            if (!active) {
                clearInterval(window.GAMLibrary.gamBFInterval);
                return;
            }
            if (window.GAMLibrary.gamBFInterval) {
                clearInterval(window.GAMLibrary.gamBFInterval);
            }
            window.GAMLibrary.gamBFInterval = setInterval(function() {
                window.GAMLibrary.setGamBFCloseBtn();
                document.querySelector("#div-gpt-ad-fimela-bottomfrm").style.display = "block";
                document.querySelector("#dfp-spinads") && document.querySelector("#dfp-spinads").parentElement.remove();
                pbjs.setTargetingForGPTAsync(['div-gpt-ad-fimela-bottomfrm']);
                googletag.pubads().refresh([window.GAMLibrary.refreshSlot]);
                typeof SPAFreezeBody == 'function' ? SPAFreezeBody(false) : '';
            }, intervalTime);
        },
        setGamBFCloseBtn: function() {
            let buttonCloseBframeClick = document.createElement("a");
            buttonCloseBframeClick.setAttribute("href", "#");
            buttonCloseBframeClick.setAttribute("id", "dfp-bframe-close");
            buttonCloseBframeClick.setAttribute("onclick", "document.getElementById('div-gpt-ad-fimela-bottomfrm').style.display='none'; return false;");
            buttonCloseBframeClick.setAttribute("style", "width: 20px; position: absolute; margin-left: 150px; top: -22px; z-index: 99999;");
            let buttonCloseBframeImg = document.createElement("img");
            buttonCloseBframeImg.setAttribute("src", "https://cdns.klimg.com/d.kapanlaginetwork.com/banner/preview/2019/08/20/close.png");
            buttonCloseBframeImg.setAttribute("style", "width: 20px; border: none;");
            buttonCloseBframeClick.appendChild(buttonCloseBframeImg);
            let checkBframeContainer = setInterval(function() {
                if (document.querySelector("#div-gpt-ad-fimela-bottomfrm") !== null) {
                    document.querySelector("#div-gpt-ad-fimela-bottomfrm").style.textAlign = "center";
                    document.querySelector("#div-gpt-ad-fimela-bottomfrm").insertAdjacentElement("afterBegin", buttonCloseBframeClick);
                    clearInterval(checkBframeContainer);
                }
            }, 500);
        },
        countScInfinite: function() {
            return this.infiniteSCId++;
        },
        gptInitInfiniteSC: function() {
            var pageType = kmklabs.pageType;
            if (pageType !== 'readPage') {
                var that = this;
                $('.js-page__articles').on('before_display', function() {
                    var scIndex = that.countScInfinite();
                    var slotName = 'div-gpt-ad-liputan6-infinite-sc-' + scIndex;
                    var slotDiv = document.createElement('div');
                    slotDiv.id = slotName;
                    slotDiv.className = "infinite_ad";
                    slotDiv.setAttribute("data-info", "ad");
                    slotDiv.setAttribute("style", "text-align:center;border-top: 1px solid #E2E2E6;padding-top: 15px;");
                    $(slotDiv).prependTo($(this));
                    /*REGISTER DIV AND REFRESH SLOT*/
                    googletag.cmd.push(function() {
                        var slot = googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/SHOWCASE', [
                            [300, 600],
                            [300, 250],
                            [250, 250],
                            [200, 200]
                        ], slotName).addService(googletag.pubads()).setTargeting("position", [scIndex]);
                        googletag.display(slotName);

                    });
                });
            } else {
                googletag.cmd.push(function() {
                    googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/SHOWCASE', [
                        [300, 600],
                        [300, 250],
                        [250, 250],
                        [200, 200]
                    ], 'div-gpt-ad-liputan6-sc').addService(googletag.pubads());
                    googletag.display('div-gpt-ad-liputan6-sc');
                });
            }
        },
        infiniteSCArticle: function() {
            let observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        /* DEFINE AND FETCH SC */
                        try {
                            let pagingIndex = parseInt(entry.target.id.split("-").pop());
                            let SC = null;
                            if (!isNaN(pagingIndex) && (pagingIndex % 2 !== 0)) {
                                SC = googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/SHOWCASE', [
                                    [300, 600],
                                    [300, 250],
                                    [250, 250],
                                    [200, 200]
                                ], "gpt-ad-fimela-sc-" + pagingIndex);
                                SC.addService(googletag.pubads()).setTargeting("pagetype", kmklabs.pageType).setTargeting("position", ((pagingIndex+1)/2));
                                googletag.display("gpt-ad-fimela-sc-" + pagingIndex);
                                pbjs.setTargetingForGPTAsync(['div-gpt-ad-fimela-sc-1']);
                                googletag.pubads().refresh([SC]);
                            }

                        } catch (err) {
                            console.log("error!");
                        }
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 1
            });

            document.querySelectorAll("div[id^='gpt-ad-fimela-sc-'").forEach(sc => {
                observer.observe(sc);
            });
        },
        documentMeta: function(metaName) {
            var metaResult = '';
            var metas = document.getElementsByTagName('meta');
            if (metas) {
                for (var x = 0, y = metas.length; x < y; x++) {
                    if (metas[x].name.toLowerCase() == metaName) {
                        metaResult += metas[x].content;
                    }
                }
            }
            return metaResult != '' ? metaResult : '';
        },
        scrollBottomFrame: function() {
            this.scroll = function() {
                var scrollNode = document.scrollingElement || document.documentElement;
                var scrollTop = scrollNode.scrollTop;
                var pageType = kmklabs.gtm.type == '' ? 'default' : kmklabs.gtm.type;
                if (scrollTop >= this.articleType[pageType].scroll) {
                    if (!this.timedBottomFrm) {
                        this.timedBottomFrm = googletag.defineSlot(this.dfpBottomFrame, [
                            [320, 50],
                            [320, 100]
                        ], 'div-gpt-ad-fimela-bottomfrm').addService(googletag.pubads());
                        setTimeout(() => {
                            if (pbjs) {
                                pbjs.setTargetingForGPTAsync(['div-gpt-ad-fimela-bottomfrm']);
                                googletag.pubads().refresh([this.timedBottomFrm]);
                                this.refreshSlot = this.timedBottomFrm;
                                this.setGamBFInterval();
                                this.setGamBFCloseBtn();
                            }
                        }, 400);
                    } else {
                        window.removeEventListener("scroll", this.scroll);
                    }
                }
            };
            this.scrollHandler = this.scroll.bind(this);
            window.addEventListener("scroll", this.scrollHandler);
        },
        scrollFloatingPin: function() {
            this.scroll = function() {
                var scrollNode = document.scrollingElement || document.documentElement;
                var scrollTop = scrollNode.scrollTop;
                var pageType = kmklabs.gtm.type == '' ? 'default' : kmklabs.gtm.type;
                // if (scrollTop >= this.articleType[pageType].scroll) {
                if (scrollTop >= 1000) {
                    if (!this.timedFloatingPin) {
                        // this.timedFloatingPin = googletag.defineSlot(this.dfpFloatingPin, [[1, 1], ['fluid']], 'div-gpt-ad-fimela-floating-pin').addService(googletag.pubads());
                        this.timedFloatingPin = googletag.defineOutOfPageSlot(this.dfpFloatingPin, 'div-gpt-ad-fimela-floating-pin').addService(googletag.pubads());
                        googletag.pubads().refresh([this.timedFloatingPin]);
                    } else {
                        window.removeEventListener("scroll", this.scroll);
                    }
                }
            };
            this.scrollHandler = this.scroll.bind(this);
            window.addEventListener("scroll", this.scrollHandler);
        },
        lazzyLoadingAdunit: function() {
            const _noIntersectionMethod = !window.IntersectionObserver;
            var __lazzYSetting__ = {
                "div-gpt-ad-fimela-mobile-contextual-oop": {
                    "type": "oop",
                    "adunit": "/36504930/m.fimela.com/dfp-contextual",
                    "generated": 0,
                }
            }

            document.addEventListener('DOMContentLoaded', function() {
                let _options = {
                    root: null,
                    rootMargin: "750px",
                    threshold: 0
                };
                let _observer = null;
                if (_noIntersectionMethod) {
                    window.addEventListener("scroll", renderAdunit);
                } else {
                    _observer = new IntersectionObserver(_entries => {
                        _entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                value = __lazzYSetting__[entry.target.id];
                                if (!value.generated) {
                                    if (value.type == "oop") {
                                        _defineSlot_ = googletag.defineOutOfPageSlot(value.adunit, entry.target.id).addService(googletag.pubads());
                                    } else {
                                        _defineSlot_ = googletag.defineSlot(value.adunit, value.size, entry.target.id).addService(googletag.pubads());
                                    }
                                    googletag.display(_defineSlot_);
                                    (value.type !== "oop") ? pbjs.setTargetingForGPTAsync([value.adunit]): '';
                                    googletag.pubads().refresh([_defineSlot_]);
                                    value.generated = 1;
                                }
                            }
                        });
                    }, _options);
                    for (const [key, value] of Object.entries(__lazzYSetting__)) {
                        let _adunitElement = document.querySelector(`#${key}`);

                        if (_adunitElement) {
                            _observer.observe(_adunitElement);
                        }
                    };
                }

                function renderAdunit() {
                    var _generatedCount_ = 0;
                    var _itemCount_ = 0;

                    for (const [key, value] of Object.entries(__lazzYSetting__)) {
                        console.log(`${key}: ${value}`);
                        _itemCount_++;
                        var _defineSlot_ = null;

                        console.log("viewport --", elementInViewport(document.getElementById(key)), null);

                        if (!value.generated && elementInViewport(document.getElementById(key))) {

                            if (value.type == "oop") {
                                _defineSlot_ = googletag.defineOutOfPageSlot(value.adunit, key).addService(googletag.pubads());
                            } else {
                                _defineSlot_ = googletag.defineSlot(value.adunit, value.size, key).addService(googletag.pubads());
                            }

                            googletag.display(_defineSlot_);
                            (value.type !== "oop") ? pbjs.setTargetingForGPTAsync([value.adunit]): '';
                            googletag.pubads().refresh([_defineSlot_]);
                            value.generated = 1;

                        }

                        if (_generatedCount_ == _itemCount_) {
                            window.removeEventListener('scroll', renderAdunit);
                        }
                    }

                }

              
                function elementInViewport(el) {
                    let rect = el.getBoundingClientRect()
                    return (
                        rect.top >= 0 && rect.left >= 0 && rect.top <= (window.innerHeight || document.documentElement.clientHeight)
                    )
                }
            });
        },
        brandSafetyChecker: function() {
            _klyObject = typeof window.kly !== 'undefined' ? window.kly : window.kmklabs,
                _articlePages = _klyObject && _klyObject.article,
                _isAdultContent = _articlePages && _articlePages.isAdultContent;
            isMatcont = "0",
                isViolateBrandSafety = "0",

                /*POPULATE META DATA*/
                bsKeyword = [],
                dfp_pageTitle = _articlePages && _articlePages.title.klyFiltering(' '),
                dfp_titles = (typeof dfp_pageTitle !== 'undefined') ? dfp_pageTitle : '',
                dfp_keyword = this.documentMeta("keywords"),
                dfp_desc = this.documentMeta("description"),
                /*tagForAds = _klyObject.gtm.tag.replace(/[^A-Za-z0-9|\- ]/ig, "").klyFiltering("|");*/
              dfp_tag = _klyObject.gtm.tag || _klyObject.tag && _klyObject.tag.name,
tagForAds = typeof dfp_tag === 'undefined' ? [] :  dfp_tag.replace(/[^A-Za-z0-9|\- ]/ig, "").klyFiltering("|");
            this.tags = tagForAds;
            const bsKeywordList = {
    'adult': ['adegan erotis', 'adegan seks', 'aduhai', 'adult', 'affair', 'air mani', 'alat bantu seks', 'alat kelamin', 'alat kontrasepsi', 'alat vital pria', 'alergi', 'anal', 'anatomi vagina', 'anjeng', 'anjing', 'anjlng', 'anjrit', 'anus', 'anying', 'apa itu kondom', 'artis indonesia bugil', 'artis porno', 'ass', 'asu', 'ayam hitam', 'babi', 'bahaya masturbasi', 'bajingan', 'bandar ceme', 'bangsat', 'bdsm', 'bego', 'belahan', 'bentuk kelamin', 'bentuk payudara', 'bercinta', 'bercinta saat hamil', 'bergairah', 'berhubungan intim', 'berhubungan seks', 'berhubungan seksual', 'bersetubuh', 'bikini', 'bintang film porno', 'bintang porno', 'biseksual', 'bitch', 'bocah sd foto mesum', 'body shaming', 'bokne', 'bokong', 'bom surabaya 2018', 'boneka seks', 'boob', 'bra', 'bugil', 'bullshit', 'bulshit', 'bulu kemaluan', 'bunuh diri', 'cabul', 'cara berhubungan intim', 'cara membuat suami bergairah', 'cara memperbesar penis', 'cara mengatasi ejakulasi dini', 'cara seksual', 'celana', 'cemani', 'cemen', 'chat firza-rizieq', 'ciuman', 'cleavage', 'cock', 'cok', 'cukur bulu kemaluan', 'cum', 'dada', 'death', 'dewasa', 'di bawah umur', 'dick', 'dildo', 'diremas', 'disfungsi ereksi', 'doggie', 'doll', 'drunk', 'ejakulasi', 'ejakulasi dini', 'ejakulasi wanita', 'eksotik', 'elo', 'entot', 'ereksi', 'erotic', 'erotis', 'ewe', 'exotic', 'fakta seks', 'fase menstruasi', 'fenomena kelainan seksual', 'fetish', 'film dewasa', 'film porno', 'foreplay', 'foto berhubungan intim', 'foto intim', 'foto telanjang', 'fuck', 'gairah', 'gairah seks', 'gairah seksual', 'gangbang', 'gangguan jiwa', 'gangguan seks', 'ganguan jiwa', 'ganguan seksual', 'ganja', 'gay', 'gaya bercinta', 'gaya bercinta dalam islam', 'gaya bercinta yang disukai pria', 'gaya seks', 'gejala penyakit', 'gemar368', 'germo', 'goblok', 'gue', 'gwe', 'hardcore', 'hasrat seksual', 'henceut', 'hindu', 'hitam mafia', 'homoseks', 'horny', 'hot', 'hubungan', 'hubungan intim', 'hubungan seksual', 'ibu hamil', 'implan payudara', 'industri film porno', 'intim', 'itil', 'jancok', 'jancuk', 'jenis alat kontrasepsi', 'jerawat', 'jual beli sperma', 'kacau', 'kakek cabul', 'kamasutra', 'kanibal', 'kanibalisme', 'kanker payudara', 'kapalan', 'kasus asusila', 'kebencian', 'kecanduan seks', 'kehidupan seks', 'kekerasan seksual', 'kelainan seks', 'kelamin', 'kelamin wanita', 'kemaluan', 'kemaluan wanita', 'kencing', 'keperawanan', 'keriting', 'kesehatan kulit dan kelamin', 'kesehatan payudara', 'kesehatan penis', 'kesehatan reproduksi', 'kesehatan wanita', 'khusus deewasa', 'kimpet', 'kisah perselingkuhan', 'kiss', 'klitoris', 'komunitas swinger', 'kondom', 'kondom pria', 'kontol', 'kontolnya', 'kontrasepsi', 'kontroversi hukuman mati', 'kontroversi lgbt', 'kotor', 'kotoran', 'kristen', 'kumuh', 'kursi tantra seks', 'legalisasi ganja', 'lemari es', 'lendir', 'lesbian', 'lgbt', 'libido', 'lingerie', 'lolita', 'lonte', 'm3m3k', 'mabuk', 'mahasiswi', 'mainan dewasa', 'mainan perangsang gairah', 'makanan berbahaya', 'makanan sehat', 'masa subur pria', 'masturbasi', 'matcont', 'mature', 'meki', 'melakukan hubungan intim', 'memek', 'memerkosa', 'mencukur bulu kemaluan', 'menggairahkan', 'menggoda', 'mengupas', 'menstruasi', 'menyiangi', 'meraba-raba', 'mesra', 'mesum', 'mimpi seks', 'mimpi telanjang', 'miss-v', 'mitos seks', 'model hot', 'model seksi', 'monyet', 'mr-p', 'mucikari siswi smp', 'nakal', 'naked', 'naughty', 'ngentot', 'ngewe', 'nipple', 'nipples', 'nonok', 'nude', 'obat ejakulasi dini', 'obat kuat', 'obat pembesar', 'obat pembesar penis terbaik', 'onani', 'oral', 'oral seks', 'organ', 'organ intim wanita', 'orgasme', 'orgasme wanita', 'overdose', 'overdosis', 'paha', 'pakistan', 'pamer', 'pantat', 'panties', 'payudara', 'payudara kecil', 'payudara wanita', 'pelacur', 'pelecehan', 'pelecehan seksual', 'pembesar penis', 'pembunuh', 'pembunuhan', 'pemerkosaan', 'pemerkosaan anak', 'pemuda', 'pencabulan', 'penetrasi', 'penetratif', 'pengetahuan seks', 'pengobatan alternatif', 'penis', 'penis bengkok', 'penis besar', 'penis kecil', 'penis pria', 'penyakit sipilis', 'penyakit vagina', 'penyimpangan seks', 'perawan', 'perawatan vagina', 'perbudakan', 'perek', 'perguruan tinggi', 'perkosa', 'perkosaan', 'permen', 'perselingkuhan', 'piss', 'play boy', 'pole', 'porn', 'porno', 'pornoaksi', 'pornografi', 'posisi bercinta', 'posisi hubungan intim suami istri menurut islam', 'posisi seks', 'posisi seksual', 'pria dewasa', 'pria idaman', 'prostitusi', 'provokatif', 'pukang', 'puki', 'puting', 'puting payudara', 'putting', 'radikal', 'raksasa', 'rangsang payudara', 'ranjang', 'rasis', 'rasisme', 'razia pasangan mesum', 'rokok', 'rudapaksa', 'rumah bordil', 'sbobet', 'seks', 'seks bebas', 'seks dalam islam', 'seks dan agama', 'seks dan kriminal', 'seks dan pasutri', 'seks oral', 'seks pria dan wanita', 'seks toy', 'seksi', 'seksual', 'seksual lelaki dan perempuan', 'seksualitas', 'seksualitas pria', 'seksualitas wanita', 'semen', 'sensual', 'seronok', 'sex', 'sex toy', 'sexy', 'shit', 'siklus menstruasi', 'situs poker terpercaya', 'situs porno', 'skandal', 'sperma', 'stres dan depresi', 'strip', 'striptease', 'striptis', 'suicide', 'sundulan', 'swinger', 'syur', 'tai', 'taik', 'tamparan', 'tante seksi', 'taruhan online', 'telanjang', 'telentang', 'terangsang', 'teroris', 'terorisme', 'tes keperawanan', 'test pack', 'testis', 'tiduri', 'tips bercinta', 'tips seks', 'titik rangsang', 'titit', 'toket', 'tolol', 'topless', 'toys', 'ujian', 'ukuran normal penis', 'ukuran penis', 'ukuran penis normal', 'ukuran penis orang indonesia', 'ukuran vagina', 'vagina', 'vagina gatal', 'vagina wanita', 'vakum pembesar penis', 'viagra', 'vibrator', 'video bercinta dengan pasangan', 'video porno', 'video seks', 'virus corona', 'vital', 'wanita telanjang', 'waria', 'woman on top', 'xxx', 'xxxx online', 'angry', 'bastard', 'blow job', 'bordil', 'college', 'crush', 'dirty', 'education', 'escort', 'furious', 'hiburan dewasa', 'homoseksual', 'household', 'lose', 'meraung', 'pahlawan wanita', 'pedofil', 'pedofilia', 'rises', 'rush', 'Sensitive', 'sexual', 'sialan', 'situs dewasa', 'spray', 'tanah amp', 'teen'],
    'war_politics': ['ahed tamimi', 'ahok gugat cerai veronica tan', 'aliran sesat', 'anarkis', 'anarkisme suporter sepakbola', 'begal motor', 'bentrok suporter', 'bentrokan', 'bentrokan warga', 'berita hoax', 'capres jokowi', 'capres prabowo', 'fanatik', 'ferdy sambo', 'fpi', 'g30s', 'invasi rusia', 'jemaah ansharut daulah', 'kebohongan ratna sarumpaet', 'kediktatoran arab saudi', 'kekerasan pada wartawan', 'killing', 'kisah mualaf', 'koalisi jokowi', 'koalisi pilpres 2019', 'koalisi prabowo', 'konflik palestina israel', 'konflik palestina-israel', 'konflik rusia ukraina', 'konflik suriah', 'lia eden', 'luwu timur', 'nato', 'penembakan', 'penganiayaan', 'pengawal', 'pengeroyokan', 'penistaan agama', 'perang', 'perang di ukraina', 'perang dunia', 'perang dunia 3', 'perang rusia', 'peristiwa', 'pilpres 2019', 'polisi', 'prabowo subianto', 'prabowo-sandiaga', 'presiden rusia', 'presiden ukraina', 'propaganda rusia', 'ratna sarumpaet', 'rokok elektrik', 'rusia', 'rusia dan ukraina', 'rusia serang ukraina', 'senjata rusia', 'serang ukraina', 'serangan', 'suporter tewas', 'taliban', 'tentara', 'ternyata hoax', 'ujaran kebencian', 'ukraina', 'vladimir putin', 'tni', 'jenderal', 'korupsi', 'politik', 'politikus', 'kpk', 'kkb', 'penjajah', 'berduka', 'army', 'corpse', 'demo', 'dilempar', 'ferdi sambo', 'news', 'news foto', 'news readers', 'politic', 'politics', 'polri', 'Palestina', 'israel', 'boikot', 'yahudi', 'ajudan', 'gaza', 'hamas', 'perwira', 'sianida', 'capres', 'cawapres', 'pemilu', 'ganjar pranowo', 'mahfud md', 'gibran rakabuming', 'anies baswedan', 'muhaimin iskandar', 'cak imin', 'politik', 'mirna', 'jessica wongso', 'makam', 'ganjar', 'anies', 'gibran', 'anis', 'presiden', 'bacapres', 'prabowo', 'mahfud', 'megawati', 'mk', 'mahkamah', 'iriana', 'firaun', 'mesir', 'ham', 'hak asasi manusia', 'cpns', 'militer', 'amunisi', 'senjata', 'senpi', 'kpu', 'partai', 'wapres', 'menteri', 'dpr', 'mrp', 'mpr', 'caleg', 'calon legislatif', 'anggota dpr', 'anggota mpr', 'bupati', 'wakil bupati', 'walikota', 'walkot', 'anggota dprd', 'dprd', 'bawaslu', 'komcad', 'cacar', 'gubernur', 'wakil gubernur', 'partai politik', 'parpol'],
    'drugs_tobacco_alcohol': ['adiktif', 'akibat merokok', 'alcohol', 'alkohol', 'artis narkoba', 'asap rokok', 'bahaya berhenti merokok', 'bahaya merokok', 'bahaya narkoba', 'bahaya rokok', 'bahaya rokok elektrik', 'berhenti merokok', 'bnn', 'cancer', 'candy', 'cara berhenti merokok', 'cbd', 'ciri ciri pengguna narkoba', 'dampak merokok', 'djarum', 'drugs', 'efek berhenti merokok', 'ganja', 'hash', 'impotensi', 'jantung', 'jenis alkohol', 'jenis alkohol dalam minuman keras', 'jenis jenis narkoba', 'jenis narkotika', 'kanker', 'kartel narkoa', 'kasus narkoba', 'kecanduan', 'kesehatan paru', 'larangan merokok', 'mafia narkoba', 'manfaat berhenti merokok', 'merokok', 'minuman beralkohol', 'minuman keras', 'narkoba', 'narkoba artis', 'obat psikotropika', 'overdosis', 'pelanggaran', 'penyalahgunaan narkoba', 'penyeludupan narkoba', 'perokok', 'pot', 'pppa', 'rehabilitasi narkoba', 'remaja narkoba', 'rokok', 'rokok elektrik', 'ruu minuman beralkohol', 'sabu', 'selebriti narkoba', 'sidang narkoba', 'stroke', 'tablet', 'tembakau', 'tips berhenti merokok', 'cukai rokok', 'kokain', 'puntung'],
    'disaster': ['10 macam pencemaran lingkungan', 'autopsi', 'bahaya pencemaran udara', 'bahaya polusi', 'belasungkawa', 'bencana', 'bencana besar', 'bola', 'bom', 'bom atom', 'bom bali', 'bom bunuh diri', 'bom gereja', 'bom meledak', 'bom nuklir', 'bom panci', 'bom sarinah', 'bom seks', 'bunuh orang', 'cara mencegah global warming', 'cara mencegah pemanasan global', 'cara mengatasi pemanasan global', 'cara mengatasi pemanasan global sebagai pelajar', 'cara mengatasi pencemaran udara', 'climate change', 'contoh pencemaran lingkungan', 'dampak pencemaran lingkungan', 'dampak pencemaran udara', 'darurat bencana', 'dilaporkan tewas', 'dimakamkan', 'dinyatakan meninggal', 'dipastikan tewas', 'ditemukan mati', 'ditemukan tewas', 'efek rumah kaca', 'efek rumah kaca adalah', 'fenomena alam', 'gas', 'gas rumah kaca', 'gempa donggala', 'gempa palu', 'gempa sulawesi tengah', 'global warming', 'global warming adalah', 'hilangkan nyawa', 'hilangnya nyawa', 'identitas korban', 'inalillahi', 'isis', 'jasad', 'jasad korban', 'jasadnya', 'jenasah wanita', 'jenazah', 'jenazah pria', 'jenazah teridentifikasi', 'jenis pencemaran lingkungan', 'kapal tenggelam', 'kapal tenggelam di danau toba', 'kasus penebangan pohon', 'kasus tabrak lari', 'keadaan kritis', 'kecelakaan', 'kecelakaan bus', 'kehilangan darah', 'kehilangan hidupnya', 'kehilangan nyawa', 'kehilangan nyawanya', 'kematian', 'korban', 'korban jiwa', 'korban meninggal', 'korban tewas', 'kota paling berpolusi', 'kota paling berpolusi didunia', 'krisis iklim', 'kualitas udara', 'ledakan bom', 'liga', 'limbah', 'limbah pabrik', 'lion air hilang kontak', 'lion air jatuh', 'lion air jatuh di karawang', 'macam pencemaran lingkungan', 'mati', 'mayat', 'mayat korban', 'meledak', 'memakan nyawa', 'membakar', 'membunuh', 'membunuh istrinya', 'membunuh mereka', 'membunuh suaminya', 'menelan nyawa', 'menemui ajal', 'menewaskan', 'menewaskan orang', 'mengalami koma', 'mengamuk', 'mengancam nyawa', 'menghembuskan nafas terakhir', 'menimbulkan korban', 'meninggal', 'meninggal akibat sakit', 'meninggal dunia', 'menyebabkan kematian', 'meregang nyawa', 'meregggut nyawa', 'merenggut jiwa', 'merenggut nyawa', 'modar', 'nyawa hilang', 'nyawa melayang', 'nyawa tak tertolong', 'orang mati', 'orang tewas', 'pelayat', 'pemakaman', 'pemanasan global', 'pemanasan global adalah', 'pembunuhan', 'pembunuhan sadis', 'pencemaran', 'pencemaran air', 'pencemaran air bersih', 'pencemaran air laut', 'pencemaran limbah', 'pencemaran lingkungan', 'pencemaran minyak', 'pencemaran sungai', 'pencemaran sungai brantas', 'pencemaran udara', 'penemuan mayat', 'pengertian efek rumah kaca', 'pengertian efek rumah kaca menurut para ahli', 'pengertian pemanasan global', 'penyakit polusi udara', 'penyakit yang disebabkan oleh polusi udara', 'penyebab efek rumah kaca', 'penyebab global warming', 'penyebab kematian', 'penyebab kerusakan lingkungan', 'penyebab pemanasan global', 'penyebab pemanasan global akibat aktivitas manusia', 'penyebab pencemaran air', 'penyebab pencemaran udara', 'penyebab perubahan iklim', 'penyebab perubahan iklim global', 'penyebab polusi udara', 'penyebab terjadinya efek rumah kaca', 'penyebab terjadinya pemanasan global', 'penyebab terjadinya pemanasan global dan efek rumah kaca', 'permintaan maaf', 'pertandingan', 'perubahan iklim', 'perubahan iklim global', 'pesawat hilang kontak', 'pesawat jatuh', 'petugas penyelamat', 'piala dunia', 'pollution', 'polusi', 'polusi jakarta', 'polusi udara', 'polusi udara di jakarta', 'polutan', 'renggut nyawa', 'sampah plastik', 'sepak', 'stadion', 'tak bernyawa', 'tak sadarkan diri', 'telah meninggal', 'telan nyawa', 'terbunuh', 'terkapar', 'teror bom', 'tewas', 'tewaskan', 'tidak bernyawa', 'timnas', 'tim penyelamat', 'trauma', 'tsunami palu', 'tutup usia', 'udara bersih', 'udara jakarta', 'wafat', 'wanita meninggal', 'won'],
    'epidemic_desease': ['corona', 'corona di indonesia', 'covid', 'covid 19', 'covid-19', 'doctor', 'dokter', 'health', 'healthy', 'hospital', 'infeksi saluran kencing', 'insomnia dan tidur', 'kematian', 'kematian virus', 'kematian wabah', 'kesehatan', 'korban terinfeksi', 'korona', 'obesitas', 'odp', 'osteoporosis', 'pdp', 'penyakit', 'positif korona', 'rsud', 'rumah sakit', 'sakit pernapasan', 'sedih', 'sehat', 'sesak', 'terinfeksi virus corona', 'terjangkit covid-19', 'terkena', 'virus', 'virus corona', 'virus korona', 'virus menyerang', 'virus-corona', 'wabah', 'wabah corona', 'crowd', 'dead', 'die', 'fail', 'fatal', 'fire', 'flu', 'illness', 'kanjuruhan', 'kanker paru paru', 'kerusuhan', 'murder', 'pneumonia', 'pulau sampah', 'stampede', 'tembak', 'tergeletak', 'terinjak', 'tragedi', 'trigger'],
    'religion': ['15lam', 'abu bakar al-baghdadi', 'al quran', 'al-quran', 'buda', 'budha', 'ibrahim al-hashimi al-qurayshi,', 'injil', 'isl4m', 'islam', 'ismi aisyah', 'jimat', 'kafir', 'katolik', 'muh4mmad', 'muhammad', 'muhammad saw', 'nabi', 'yesus', 'idul fitri', 'puasa', 'ramadan', 'ramadhan'],
    'gambling': ['agen poker', 'agen sbobet', 'bonus deposit', 'bonus refferal', 'bonus rollingan', 'cashtree', 'game', 'judi', 'minimal deposit', 'poker', 'poker online'],
    'parenting': ['anak', 'anak artis', 'anak cerdas', 'anak dan balita', 'anak mandiri', 'anak selebritis', 'anak selebritis indonesia', 'arti nama anak', 'arti nama bayi', 'artis bercerai', 'artis hamil', 'asi anak', 'ayah', 'baby', 'baby ameena', 'baby arsy', 'baby bump', 'baby bump artis', 'baby dan balita', 'baby face', 'baby gempi', 'baby leslar', 'baby shower', 'baby shower selebritis', 'baby sitter', 'baby spa', 'baby walker', 'babymoon', 'babymoon artis', 'babyologist', 'baru lahir', 'bayi', 'bayi 6 bulan', 'bayi artis', 'bayi dan anak', 'bayi kembar', 'bayi muntah', 'bayi pilek', 'bayi seleb', 'bayi selebritis', 'bayi selebritis indonesia', 'bayi tabung', 'camilan bayi', 'cara mengeluarkan dahak pada bayi', 'child', 'children', 'family', 'father', 'gaya baby', 'ibu', 'ibu anak', 'induk', 'jadwal makan bayi', 'jam tidur bayi', 'kehamilan', 'keibuan', 'kelahiran anak', 'kelahiran bayi', 'keluarga', 'keluarga artis', 'keluarga bahagia', 'keluarga dan anak', 'keluarga harmonis', 'keluarga penjabat', 'keluarga seleb', 'kesehatan bayi', 'kesehatan bayi dan balita', 'kesehatan keluarga', 'kid', 'masalah anak', 'mendidik anak', 'menyusui', 'mother', 'mpasi', 'nama anak', 'nama anak islam', 'nama anak kristen', 'nama anak laki laki', 'nama anak perempuan', 'nama anak sansekerta', 'nama bayi', 'nama bayi islam', 'nama bayi kristen', 'nama bayi laki laki', 'nama bayi laki laki unik', 'nama bayi perempuan', 'nama bayi perempuan unik', 'nama bayi sansekerta', 'newborn', 'orang tua', 'parent', 'parenting', 'pendidikan', 'penyakit bayi', 'penyebab bayi muntah', 'perawatan bayi', 'perceraian artis', 'perkembangan janin', 'perlengkapan bayi', 'pertumbuhan anak', 'pijat bayi', 'remaja', 'resep mpasi', 'rumah tangga', 'school', 'sekolah', 'spa baby', 'tips parenting', 'ucapan kelahiran', 'youth'],
'custom_keys':['ahed tamimi', 'aliran sesat', 'anarkis', 'anarkisme suporter sepakbola', 'begal motor', 'bentrok suporter', 'bentrokan', 'bentrokan warga', 'berita hoax', 'capres jokowi', 'capres prabowo', 'fanatik', 'ferdy sambo', 'fpi', 'g30s', 'invasi rusia', 'jemaah ansharut daulah','kediktatoran arab saudi', 'kekerasan pada wartawan', 'killing', 'kisah mualaf', 'koalisi jokowi', 'koalisi pilpres 2024', 'koalisi prabowo', 'konflik palestina israel', 'konflik palestina-israel', 'konflik rusia ukraina', 'konflik suriah','luwu timur', 'nato', 'penembakan', 'penganiayaan', 'pengawal', 'pengeroyokan', 'penistaan agama', 'perang', 'perang di ukraina', 'perang dunia', 'perang dunia 3', 'perang rusia', 'peristiwa', 'pilpres 2024', 'prabowo subianto', 'prabowo-sandiaga', 'presiden rusia', 'presiden ukraina', 'propaganda rusia', 'ratna sarumpaet', 'rusia', 'rusia dan ukraina', 'rusia serang ukraina', 'senjata rusia', 'serang ukraina', 'serangan', 'suporter tewas', 'taliban', 'tentara', 'ternyata hoax', 'ujaran kebencian', 'ukraina', 'vladimir putin','korupsi','kpk', 'kkb', 'penjajah', 'berduka', 'army', 'corpse', 'demo', 'dilempar', 'ferdi sambo','Palestina', 'israel', 'boikot', 'yahudi', 'ajudan', 'gaza', 'hamas', 'perwira', 'sianida', 'capres', 'cawapres', 'pemilu', 'ganjar pranowo', 'mahfud md', 'gibran rakabuming', 'anies baswedan', 'muhaimin iskandar', 'cak imin','mirna', 'jessica wongso', 'makam', 'ganjar', 'anies', 'gibran', 'anis', 'presiden', 'bacapres', 'prabowo', 'mahfud', 'megawati', 'mk', 'mahkamah', 'iriana', 'ham', 'hak asasi manusia', 'cpns', 'militer', 'amunisi', 'senjata', 'senpi', 'kpu', 'partai', 'caleg', 'calon legislatif', 'bawaslu', 'cacar', 'gubernur', 'wakil gubernur', 'partai politik', 'parpol', 'calon wakil presiden', 'calon presiden','amin','pemilihan umum','calon anggota dpr','calon anggota mpr','calon anggota dprd','bacaleg','genosida','genocide','kampanye','blusukan','safari politik', 'gagal ginjal akut', 'gas air mata', 'pregnancy', 'smoker', 'tragedi kanjuruhan', 'tween']
            };


            /*change this acording to the site page layout*/
            var siteContentObject = document.querySelectorAll('.article-content-body__item > :not(.baca-juga-collections__detail)'),
                siteContentText = '',
                headerText = document.querySelector('.article-header');
            for (let elm of siteContentObject) {
                siteContentText += elm.innerText;
            }

            siteContentText = dfp_keyword.concat(dfp_titles,' ', dfp_desc,' ', tagForAds,' ', siteContentText,' ', headerText && headerText.innerText);

            /*Iterate for all keyword list category to find match word*/
            for (var bsKey in bsKeywordList) {
                var subKeywordList = bsKeywordList[bsKey];
                if (subKeywordList.length > 0) {
                    if (matchString = new RegExp("\\b(" + subKeywordList.join("|") + ")\\b", "ig").exec(siteContentText)) {

                        bsKeyword.push(bsKey);
                    }
                }
            }


            if (bsKeyword.length > 0) {
                googletag.pubads().setTargeting("bsKeyword", bsKeyword);
                /*Temporary preserve the previous brand safety targeting*/
                googletag.pubads().setTargeting("brandsafety", isViolateBrandSafety);
            }

          	googletag.pubads().setTargeting("isMatcont", (typeof _klyObject !== 'undefined' && typeof _klyObject.article !== 'undefined' && _klyObject.article.isAdultContent === true) ? "1" : isMatcont);
        },
        onMessageReceivedGPTUpdateCreativeStyle: function() {
            this.onMessageReceivedGetStyle = function(e) {
                /** filter only correct origin and setStyle or setHlStickyActive command */
                if (!(e.origin.match(/safeframe.googlesyndication.com/ig)) ||
                    typeof e.data !== 'object' ||
                    typeof e.data.id !== 'string' ||
                    typeof e.data.params !== 'object'
                ) {
                    if (e.data.cmd !== 'setStyle' && e.data.cmd !== 'setHlStickyActive') {
                        return;   
                    }
                }

                /** execute actions based on the command type */
                if (e.data.cmd === 'setStyle' && typeof e.data.params === 'object') {
                    /* remove # character from id, we don't use jquery */
                    var elementId = e.data.id.replace(/#/, "");

                    var wrapperEl = document.getElementById(elementId);
                    if (wrapperEl === null) {
                        return;
                    }

                    var elements = [wrapperEl];
                    /* target on KLY authorized element child (div and iframe) */
                    if (typeof e.data.query === 'string' && e.data.query) {
                        let el = null;
                        if (el = e.data.query.match(/(div|iframe)/ig)) {
                            elements = wrapperEl.querySelectorAll(el.join(", "));
                        }
                    }

                    /** target on KLY authorized attribute (display, height, width) */
                    elements.forEach(function(element) {
                        Object.keys(e.data.params).forEach(function(param) {
                            let allowedAttr = ['display', 'height', 'width'];
                            allowedAttr.indexOf(param) > -1 ? (element.style[param] = e.data.params[param]) : '';
                        });
                    });
                } else if (e.data.cmd === 'setHlStickyActive') {
                    /** set hlStickyActive parameter in GAMLibrary to true */
                    if (typeof GAMLibrary !== 'undefined') {
                        GAMLibrary.hlStickyActive = true;
                        window.addEventListener("scroll", headlineStickyScrollEventV2);
                    }
                }
            };

            /** add event listener to receive messages */
            if (window.addEventListener) {
                window.addEventListener('message', this.onMessageReceivedGetStyle, false);
            } else {
                if (window.attachEvent) {
                    window.attachEvent('onmessage', this.onMessageReceivedGetStyle);
                } else {
                    window.onmessage = this.onMessageReceivedGetStyle;
                }
            }
        },
        _SCFlyingCarpetStyle_: function() {
            var _style_ = document.createElement("style");
            _style_.textContent = `#gpt-ad-sc-paging-placeholder { max-height: 270px; overflow: hidden; } #div-gpt-ad-sc-placeholder div[id*="fimela-sc"].flying-carpet, #div-gpt-ad-sc-paging-placeholder div[id*="fimela-sc"].flying-carpet{ position: relative; clear: both; overflow: hidden; clip-path: polygon(0px 0px, 100% 0px, 100% 100%, 0px 100%) !important; min-height: 270px; width: 100%; display: flex; justify-content: center; } #div-gpt-ad-sc-paging-placeholder div[id*="fimela-sc"].flying-carpet .ad-content, #div-gpt-ad-sc-placeholder div[id*="fimela-sc"].flying-carpet .ad-content { top: 50%; transform: translateY(-50%); position: fixed; z-index: 2; }`;
            document.querySelector("body").appendChild(_style_)
        },
        _SCFlyingCarpetEffect_: function(event) {
            var _domId_ = event.slot.getSlotId().getDomId();
            var _domTarget_ = document.getElementById(_domId_)
            var _is300x600_ = JSON.stringify(event.size) == '[300,600]'
            if(_is300x600_ && _domId_.includes("sc")){
                _domTarget_.classList.add("flying-carpet")
                _domTarget_.querySelector("div").classList.add("ad-content")
            }
        },
        exposerInterscroller: function(event) {
            var _domId_ = event.slot.getSlotId().getDomId();

            var _domTarget_ = document.getElementById(_domId_)
            var _is300x250_ = JSON.stringify(event.size) == '[300,250]'
            if (_is300x250_ && _domId_.includes("exposer")) {
                _domTarget_.classList.add("interscroller")

                if (_domTarget_.parentElement.id.includes("placeholder")) {
                    _domTarget_.parentElement.classList.add("interscroller-wrapper")
                }
            }
        },
        _ExposerInterScrollerStyle_: function() {
            var _style_ = document.createElement("style");
          var exclIOS = !_IS_IOS_ ? "div#back-to-top { overflow: unset !important; }" : "";
            _style_.textContent = `${exclIOS} .interscroller-wrapper{ display: block !important; } .interscroller{position: -webkit-sticky;  position: sticky; top: 160px; } div.advertisement-placeholder { margin-right: 0px; }`;

            document.querySelector("body").appendChild(_style_)

        },
        /* ============ RENDER HEADLINE V2 ============ */
        hlStickyActive: false,
        renderHeadlineV2: function() {
                let isTFShrinking = null;
                let catchTFShrinking = 0;
                isTFShrinking = setInterval(function() {
                    if (window._TOPFRAME_STICKY_END_) {
                        if (document.getElementById("div-gpt-ad-fimela-hl-1") !== null) {
                            this.injectHeadlineV2();
                            clearInterval(isTFShrinking);
                        }
                    }
                }.bind(this), 300);
        },
        injectHeadlineV2: function() {
            let headlineSlotContainer = document.querySelector("#div-gpt-ad-fimela-hl-1");
            let urlParams = new URLSearchParams(window.location.search);
            let myParam = JSON.parse(urlParams.get('interval'));

            headlineStickyV2(myParam);
            if ((headlineSlotContainer.getClientRects() && ~~headlineSlotContainer.getClientRects()[0].top) <= (window.screen.height - 50)) {
                this.activateHeadlineV2();
                setTimeout(() => {
                    headlineStickyScrollEventV2();
                }, 500);

            }
            this.scrollHLV2 = function() {
                this.activateHeadlineV2() ? window.removeEventListener("scroll", this.scrollHandlerV2) : '';
            };
            this.scrollHandlerV2 = this.scrollHLV2.bind(this);
            window.addEventListener("scroll", this.scrollHandlerV2);
        },
        activateHeadlineV2: function() {
            if (!this.headline) {
                this.headline = googletag.defineSlot(GAMLibrary.dfpHeadline, [
                    [320, 50],
                    [320, 100]
                ], 'div-gpt-ad-fimela-hl-1').addService(googletag.pubads());
                var countPbjsObj = 0;
                var intervalPbjs = setInterval(function() {
                    if (typeof pbjs.setTargetingForGPTAsync === 'function') {
                        pbjs.setTargetingForGPTAsync(['div-gpt-ad-fimela-hl-1']);
                        clearInterval(intervalPbjs);
                    }
                    if (countPbjsObj > 10) {
                        clearInterval(intervalPbjs);
                    }
                    countPbjsObj++;
                }, 300);
                googletag.pubads().refresh([this.headline]);
            }

            return this.headline;

        },
        /* ============ RENDER HEADLINE V2 ============ */

        /* ============ IN-IMAGE ============ */
        inImageAdsInject: function() {
            let inImageArticleItems = document.querySelectorAll(".article-content-body__item");
            let inImageTargetWrapper, inImageTargetImageWrapper;

            for (let i = 0; i < inImageArticleItems.length; i++) {
                inImageTargetWrapper = inImageArticleItems[i];
                inImageTargetImageWrapper = inImageTargetWrapper?.querySelector(".article-photo-gallery--item");
                if (inImageTargetImageWrapper) {
                    break;
                }
            }

            let inImageTargetTitle = inImageTargetWrapper?.querySelector(".article-content-body__item-title");
            let inImageTargetImage = inImageTargetWrapper?.querySelector(".article-photo-gallery--item__content");
            let inImageTargetSC1 = document.querySelector("#gpt-ad-fimela-sc-1");
            let checks = [inImageTargetWrapper, inImageTargetImageWrapper, inImageTargetTitle, inImageTargetImage, inImageTargetSC1];
            if (checks.some(check => check == null)) return;
            
            let inImageElement = document.createElement("div");
            let inImageStyle = document.createElement("style");
            inImageElement.setAttribute("id", "in-image-ads");
            inImageElement.innerHTML = `
                <div class="banner-wrapper-in-image">
                    <div class="in-image-ads-close">
                        <img src="https://cdns.klimg.com/d.kapanlaginetwork.com/banner/preview/2019/08/20/close.png">
                    </div>
                    <div id='div-gpt-ad-fimela-inimage' style='height:auto; width:320px;' data-info='ad'></div>
                </div>
            `

            inImageStyle.textContent = `div#in-image-ads { position: absolute; width: 100%; height: auto; top: ${inImageTargetTitle.clientHeight+ 20}px; background: transparent; transition: all .5s ease; overflow: hidden; aspect-ratio: ${inImageTargetImage.clientWidth} / ${inImageTargetImage.clientHeight}; z-index: 10; } div#in-image-ads.in-image { overflow: hidden; } div#in-image-ads::after { content: ""; width: 100%; height: auto; position: absolute; aspect-ratio: ${inImageTargetImage.clientWidth} / ${inImageTargetImage.clientHeight}; z-index: -1; bottom: 0; opacity: 0; background: linear-gradient(0deg, black, transparent); transition: all .5s ease 2.2s; } div#in-image-ads.active::after {opacity: 1;} div#in-image-ads.lr div#div-gpt-ad-fimela-inimage { transform: scale(${(inImageTargetImage.clientHeight / 280 > 1) ? 1 : inImageTargetImage.clientHeight / 280}); transform-origin: bottom; width: 100% !important;} div#in-image-ads.active { animation: dimOverlay 2.5s ease forwards; } @keyframes dimOverlay { 0% { background: transparent; } 70% { background: #00000099; } 100% { background: transparent; } } .banner-wrapper-in-image { width: 100%; height: auto; position: absolute; bottom: -150%; transition: all 2s ease; display: flex; justify-content: center; } div#in-image-ads.active .banner-wrapper-in-image { bottom: 0px; } div#in-image-ads .banner-wrapper-in-image .in-image-ads-close img { width: 100%; } div#in-image-ads.active .banner-wrapper-in-image .in-image-ads-close { opacity: 1; } div#in-image-ads .banner-wrapper-in-image .in-image-ads-close { opacity: 0; position: absolute; left: 47%; top: -25px; width: 25px; height: 25px; transform: translateX(147.5px); } div#in-image-ads.lr .in-image-ads-close { display: none; }`;
            inImageTargetImageWrapper.appendChild(inImageElement);
            inImageTargetImageWrapper.appendChild(inImageStyle);

            // TWEAK FOR FIMELA LAZYLOADING
            let elCheck = setInterval(() => {
                let inImageAds = document.querySelector("#in-image-ads");
                if (inImageAds && inImageTargetImage.querySelector('img.lazyloaded') && (inImageTargetSC1.clientHeight !== 0 || inImageTargetWrapper.querySelector('#div-gpt-ad-sc-paging-placeholder'))) {
                    let previousSiblings = inImageTargetImageWrapper.previousElementSibling;
                    let totalHeight = 0;

                    while (previousSiblings) {
                        totalHeight += previousSiblings.offsetHeight;
                        previousSiblings = previousSiblings.previousElementSibling;
                    }

                    let topOffset = totalHeight + 50;
                    inImageAds.style.top = topOffset + 'px';
                    inImageAds.style.aspectRatio = `${inImageTargetImage.querySelector('img.lazyloaded').clientWidth} / ${inImageTargetImage.querySelector('img.lazyloaded').clientHeight}`;

                    clearInterval(elCheck);
                    
                    this.inImageAdsActive();
                }
            }, 100);
        },
        inImageAdsActive: function() {
            this.inImageAds = googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/IN-IMAGE', [[320, 50], [320, 100], [1, 1]], 'div-gpt-ad-fimela-inimage').addService(googletag.pubads());

            window.addEventListener('scroll', this.inImageAdsScrollevent)
        },
        inImageAdsScrollevent: function() {
            let inImageAds = document.querySelector("#in-image-ads")
            let inImageAdsClose = document.querySelector("#in-image-ads .in-image-ads-close");

            let isInViewport = GAMLibrary.inImageElementOnviewPort(inImageAds)
            if (isInViewport) {
                googletag.pubads().refresh([GAMLibrary.inImageAds]);
                window.removeEventListener('scroll', GAMLibrary.inImageAdsScrollevent)
                setTimeout(function() {
                    inImageAds.classList.add("active")
                }, 500);

                // GAMLibrary.manageAdRefresh([
                //     { name: "inImageAds", interval: 30000 },
                // ]);
            }

            inImageAdsClose.addEventListener("click", function() {
                inImageAds.classList.remove("active")
            })
        },
        inImageElementOnviewPort: function(el) {
            let rect = el.getBoundingClientRect();
            return (rect.top >= 0 && rect.left >= 0 && rect.top <= (window.innerHeight / 3 * 2 || document.documentElement.clientHeight / 3 * 2));
        },
        /* ============ IN-IMAGE ============ */

        /* ============ FEEDBOARD ============ */
        feedboardAdsInject: function() {
            const targetElement = document.getElementById('div-gpt-ad-fimela-feedboard');
            if (targetElement) {
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                this.feedboardAds = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/FEEDBOARD', 'div-gpt-ad-fimela-feedboard').addService(googletag.pubads());
                                googletag.pubads().refresh([this.feedboardAds]);
                                observer.unobserve(targetElement);
                            }
                        });
                    }, {
                        rootMargin: '200px 0px',
                        threshold: 0.1
                    });
                    observer.observe(targetElement);
                }
            }
        },
        /* ============ FEEDBOARD ============ */

        manageAdRefresh: function (adUnits = []) {
            if (!this.adIntervals) {
                this.adIntervals = {}; // Objek untuk menyimpan interval setiap ad unit
            }

            adUnits.forEach(({ name, interval = 60000, active = true }) => {
                // Hentikan interval jika `active: false`
                if (!active) {
                    if (this.adIntervals[name]) {
                        clearInterval(this.adIntervals[name]);
                        delete this.adIntervals[name]; // Hapus dari objek
                    }
                    return;
                }

                // Hindari restart interval jika tidak berubah
                if (this.adIntervals[name] && this.adIntervals[name].interval === interval) {
                    return;
                }

                // Hentikan interval lama jika ada
                if (this.adIntervals[name]) {
                    clearInterval(this.adIntervals[name]);
                }

                // Buat interval baru
                this.adIntervals[name] = setInterval(() => {
                    googletag.pubads().refresh([this[name]]);
                }, interval);

                // Simpan interval time agar tidak restart jika tidak perlu
                this.adIntervals[name].interval = interval;
            });
        },
        HeavyAdsResolver: class {
            constructor() {
                this.checkCount = 0;
                this.checkInterval = null;
                this.player = null;
                this.volumeButton = null;
                this.playButton = null;
                this.init();
            }

            init() {
                this.checkInterval = setInterval(() => this.checkForVideo(), 100);
            }

            checkForVideo() {
                this.checkCount++;
                const videoWrapper = document.querySelector("div[id^='kly-masthead-video-ouststream-'], div[id^='kly-masthead-desktop-video-ouststream-']");
                const videoFrame =  videoWrapper && videoWrapper.querySelector("iframe");
                if (videoWrapper && videoFrame) {
                    this.setupPlayer(videoWrapper);
                    clearInterval(this.checkInterval);
                } else if (this.checkCount > 500) {
                    clearInterval(this.checkInterval);
                }
            }

            setupPlayer(videoWrapper) {
                const container = videoWrapper.querySelector("#video-wrapper");
                const uniqId = videoWrapper.id;
                const currentVideo = container.querySelector("iframe");
                const videoType = container.dataset.videoType;
                const videoId = container.dataset.videoId;


                switch (videoType) {
                    case "youtube":
                        currentVideo.remove();
                        const playerDiv = document.createElement("div");
                        playerDiv.id = "youtube-player";
                        container.appendChild(playerDiv);
                        if (!window.YT || !YT.Player) {
                            const tag = document.createElement("script");
                            tag.src = "https://www.youtube.com/iframe_api";
                            document.body.appendChild(tag);
                        }

                        window.onYouTubeIframeAPIReady = () => {
                            this.player = new YT.Player("youtube-player", {
                                width: "320",
                                height: "180",
                                videoId: videoId,
                                playerVars: {
                                    autoplay: 1,
                                    mute: 1,
                                    controls: 0,
                                    playsinline: 1,
                                    enablejsapi: 1,
                                },
                                events: {
                                    onReady: (event) => this.onPlayerReady(event),
                                },
                            });
                        };
                        break;
                    case "vidiocom":
                        const cloneIframe = currentVideo.cloneNode(true);
                        Object.entries({
                            src: videoId,
                            scrolling: 'no',
                            frameborder: '0',
                            width: '320',
                            height: '180',
                            id: 'embed-' + uniqId,
                            class: 'embed-vidiocom',
                            name: 'embed-' + uniqId
                        }).forEach(([k, v]) => cloneIframe.setAttribute(k, v));
                        currentVideo.remove();
                        container.querySelector("#player-wrapper").remove();
                        this.player = cloneIframe;
                        container.appendChild(cloneIframe);
                        break;
                }

            }

            onPlayerReady(event) {
                this.volumeButton = parent.document.querySelector("div#player-wrapper div#btn-volume");
                this.playButton = parent.document.querySelector("div#player-wrapper div#btn-play");

                this.volumeButton.addEventListener("click", () => this.volumeAction());
                this.playButton.addEventListener("click", () => this.playAction());
            }

            volumeAction(state) {
                const currentState = typeof state === "string" ?
                    state :
                    this.volumeButton.classList.contains("mute") ? "mute" : "unmute";

                if (currentState === "mute") {
                    this.player.unMute();
                    this.volumeButton.setAttribute("class", "unmute");
                } else {
                    this.player.mute();
                    this.volumeButton.setAttribute("class", "mute");
                }
            }

            playAction(state) {
                const currentState = typeof state === "string" ?
                    state :
                    this.playButton.classList.contains("play") ? "play" : "pause";

                if (currentState === "pause") {
                    this.player.pauseVideo();
                    this.playButton.setAttribute("class", "play");
                } else {
                    this.player.playVideo();
                    this.playButton.setAttribute("class", "pause");
                }
            }
        },
    }
    
    document.addEventListener("DOMContentLoaded", () => {
        window.GAMLibrary.infiniteSCArticle();
        window.GAMLibrary._ExposerInterScrollerStyle_();
        window.GAMLibrary._SCFlyingCarpetStyle_();
        window.GAMLibrary.feedboardAdsInject();
    });

    /* DMP CATEGORY LIST */
    window.createDMPTracker = function(adsCatList, dfpTracker, macro) {
        parent.window.open(dfpTracker, '_blank');
    };

    googletag.cmd.push(function() {
        var urlPath = document.URL;
        var addPictureFirst = function(){
        	var pfContainer = document.createElement("div"),
              streamLineContainer = document.querySelector(".articles-readpage__streamline");      
              pfContainer.id = 'div-gpt-ad-fimela-picturefirst';
              if(streamLineContainer && streamLineContainer.insertAdjacentElement("beforebegin",pfContainer)){
                window.GAMLibrary.pictureFirst = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/CONTENT_CAROUSEL', 'div-gpt-ad-fimela-picturefirst').addService(googletag.pubads());
                    }
                }
        GAMLibrary.brandSafetyChecker();

        /*DEFINE ALL SLOT*/
        if (GAMLibrary.topFrameFixedSize) {
            window.GAMLibrary.topframe = googletag.defineSlot(GAMLibrary.dfpTopFrame, [[1, 1], [336, 280], [300, 250], [320, 480]], 'div-gpt-ad-fimela-topfrm').addService(googletag.pubads());
        } else {
            window.GAMLibrary.topframe = googletag.defineOutOfPageSlot(GAMLibrary.dfpTopFrame, 'div-gpt-ad-fimela-topfrm').addService(googletag.pubads());
        }

        /** HEADLINE TWEAK */
        GAMLibrary.renderHeadlineV2();
        /** HEADLINE TWEAK */

        GAMLibrary.inImageAdsInject();
        
        window.GAMLibrary.crmOrganic1 = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/ORGANIC_FEED_CRM_1', 'div-gpt-ad-fimela-crm1-oop').addService(googletag.pubads());
        window.GAMLibrary.crmOrganic2 = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/ORGANIC_FEED_CRM_2', 'div-gpt-ad-fimela-crm2-oop').addService(googletag.pubads());
        window.GAMLibrary.crmOrganic3 = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/ORGANIC_FEED_CRM_3', 'div-gpt-ad-fimela-crm3-oop').addService(googletag.pubads());
        /*window.GAMLibrary.pictureFirst = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/CONTENT_CAROUSEL', 'div-gpt-ad-fimela-picturefirst').addService(googletag.pubads());*/
        addPictureFirst();
        window.GAMLibrary.inreadnative = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/IN-READ_NATIVE', 'div-gpt-ad-fimela-in-read-native').addService(googletag.pubads());
        window.GAMLibrary.widget = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/WIDGET', 'div-gpt-ad-fimela-widget').addService(googletag.pubads());

        window.GAMLibrary.slideup = googletag.defineSlot(GAMLibrary.dfpSlideup, [1, 1], 'div-gpt-ad-fimela-mgid-inarticle').addService(googletag.pubads());
        // window.GAMLibrary.slideup = googletag.defineOutOfPageSlot(GAMLibrary.dfpSlideup, 'div-gpt-ad-fimela-slide-up-oop').addService(googletag.pubads());

        window.GAMLibrary.insertion = googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/INSERTION', [1, 1], 'div-gpt-ad-fimela-mgid-underarticle').addService(googletag.pubads());
        // window.GAMLibrary.insertion = googletag.defineOutOfPageSlot('/36504930/KLY/MOBILE/FIMELA.COM/INSERTION', 'div-gpt-ad-fimela-insertion-oop').addService(googletag.pubads());

        // window.GAMLibrary.headline = googletag.defineSlot(GAMLibrary.dfpHeadline, [
        //     [320, 50],
        //     [320, 100]
        // ], 'div-gpt-ad-fimela-hl-1').addService(googletag.pubads());
        window.GAMLibrary.showcase = googletag.defineSlot('/36504930/KLY/MOBILE/FIMELA.COM/SHOWCASE', [
            [300, 600],
            [300, 250],
            [250, 250],
            [200, 200]
        ], 'div-gpt-ad-fimela-sc-1').addService(googletag.pubads());
        window.GAMLibrary.exposer1 = googletag.defineSlot(GAMLibrary.dfpExposer1, [
          	[1,1],
            [300, 250],
            [300, 600],
            [320, 480],
            [160, 600],
            [250, 250]
        ], 'div-gpt-ad-fimela-dfp-exposer-slot1-oop').addService(googletag.pubads());
        
        /* INTERSTITIAL ADS */
        if (!_IS_IOS_) {
            window.GAMLibrary.interstitial = googletag.defineOutOfPageSlot(GAMLibrary.dfpInterstitial, googletag.enums.OutOfPageFormat.INTERSTITIAL);
            window.GAMLibrary.interstitial ? window.GAMLibrary.interstitial.addService(googletag.pubads()) : '';
        }
        /* INTERSTITIAL ADS */
      
        googletag.pubads().addEventListener('slotResponseReceived', function(event) {
            var dfp_slotDelivered = event.slot.getResponseInformation() ? 'block' : 'none'; /* check wheter there is ads or not*/
            var dfp_slotAdUnitPath = event.slot.getSlotId().getAdUnitPath(); /* get adunit path */
            var dfp_slotAdUnitID = event.slot.getSlotId().getId(); /* get adunit container id*/
            var dfp_slotElementId = event.slot.getSlotId().getDomId(); /* get adunit dom id*/
            
            /* DISPLAY NONE THE IFRAME, FOR ADS ELEMENT OUTSIDE IT'S IFRAME CONTAINER */
            if (dfp_slotElementId.match(/-oop/)) { /* && !dfp_slotElementId.match(/billboard|lb/)) {*/
                if (document.getElementById(dfp_slotElementId) && document.getElementById(dfp_slotElementId).getElementsByTagName('iframe')[0] && (document.getElementById(dfp_slotElementId).getElementsByTagName('iframe')[0].getAttribute('height') == 1)) {
                    document.getElementById(dfp_slotElementId).getElementsByTagName('iframe')[0].style.display = "none";
                }
            }
        });

        googletag.pubads().addEventListener('slotRenderEnded', function(event) {
            window.GAMLibrary.exposerInterscroller(event);
            window.GAMLibrary._SCFlyingCarpetEffect_(event);

            var containerId = event.slot.getSlotElementId();
            var containerEl = document.getElementById(containerId);
						
          	/*Bottom Frame Scrolling*/
            GAMLibrary.scrollBottomFrame();
            
            if (containerId.includes("topfrm")) {
                if ([[336,280], [300,250], [320,480]].some(size => JSON.stringify(event.size) === JSON.stringify(size))) {
                    var parallaxEl = document.getElementById("div-gpt-ad-topfrm-parallax-wrapper");
                    var topfrmEl = document.getElementById("div-gpt-ad-fimela-topfrm");
                    if (parallaxEl && topfrmEl) {
                        parallaxEl.style.display = "flex";
                        parallaxEl.style.alignItems = "center";
                        topfrmEl.style.position = "absolute";
                        topfrmEl.style.width = "100vw";

                        if (JSON.stringify(event.size) == '[320,480]') {
                            topfrmEl.style.transform = 'scale(' + (parallaxEl.clientHeight - 20) / topfrmEl.clientHeight + ')';
                        }
                    }
                }
            }

            // TOPFRAME SHRINKING V8
            if (containerId.includes("topfrm") && !_adsvisible_.topframe) {
                window.addEventListener("scroll", _SET_STICKY_v2_SCROLL_)
                setTimeout(() => {
                    if (!_TOPFRAME_STICKY_) {
                        window.removeEventListener("scroll", _SET_STICKY_v2_SCROLL_)
                        _TOPFRAME_STICKY_END_ = true
                    }
                }, 2000);
            }
            // END TOPFRAME SHRINKING V8

            // AUTO CLOSE IN IMAGE 336 X 280
            if(containerId == "div-gpt-ad-fimela-inimage" && JSON.stringify(event.size) == '[336,280]'){
                var scale = Math.min(1, document.querySelector('.article-photo-gallery--item__content').clientHeight / 280);

                document.querySelector("#in-image-ads").classList.add("lr")
                document.querySelector("#in-image-ads #div-gpt-ad-fimela-inimage").style.transform = `scale(${scale})`;

                setTimeout(function () {
                    document.querySelector("#in-image-ads").classList.remove("active")
                }, 10000)
            }
            // AUTO CLOSE IN IMAGE 336 X 280

            if (containerEl === null) return;

            var iframeEl = containerEl.querySelectorAll('iframe')[0];

            /* it's delayed by 10 milliseconds, because iframe is not yet fully rendered
            and limited to max to 10 seconds to wait*/
            var timeoutFunction = function() {
                var src = "#" + containerId;
                /* `src` attribute is null, when iframe is FriendlyIframe, and
                when it's present, then it's SafeFrame */
                if (iframeEl) {
                    if ((iframeEl.getAttribute('src') !== null)) {
                        src = iframeEl.getAttribute('src').replace(/#.*/, "") + src;
                    } else {
                        var name = iframeEl.getAttribute('name') + "#" + containerId;
                        iframeEl.setAttribute('name', name);
                    }
                    iframeEl.setAttribute('src', src);
                }
            };
            setTimeout(timeoutFunction, 10);
            if (!GAMLibrary.generatedScrollFP) {
                /*Floating Pin Scrolling*/
                GAMLibrary.scrollFloatingPin();
                GAMLibrary.generatedScrollFP = 1;
            }
        });
      
      var _adsvisible_ = {
          "topframe" : false
      }

        googletag.pubads().addEventListener('slotVisibilityChanged', function(event) {
            let slot = event.slot,
                vrslotName = slot.getSlotElementId();

            // topframe shirnking tweak
            if(vrslotName.includes("topfrm") && event.inViewPercentage >= 70){
                if(_TOPFRAME_STICKY_TIME_ > 2 && !_adsvisible_.topframe && document.querySelector(".topframe-sticky-counter")){
                    _TOPFRAME_STICKY_TIME_ = 4
                    _adsvisible_.topframe = true
                }
            }
            // topframe shirnking tweak

            if (slot === GAMLibrary.headline) {
                if (event.inViewPercentage > 80 && !GAMLibrary.generatedScrollBF) {


                    /*Floating Pin Scrolling*/
                    // GAMLibrary.scrollFloatingPin();

                    GAMLibrary.generatedScrollBF = 1;
                }
            }
        });

        /*  START TARGETING BLOCK   */
        googletag.pubads().setTargeting("tags", GAMLibrary.tags);
        googletag.pubads().setTargeting("articleTitle", kmklabs.article.title);
    	googletag.pubads().setTargeting("articlePath", window.location.pathname);
        googletag.pubads().setTargeting("platform", kmklabs.platform);
        googletag.pubads().setTargeting("type", kmklabs.gtm.type);
        googletag.pubads().setTargeting("pageType", kmklabs.pageType);
        googletag.pubads().setTargeting("channel", kmklabs.gtm.subCategory);
        googletag.pubads().setTargeting("audience", kmklabs.gtm.audience && kmklabs.gtm.audience.split("|") || "");
        googletag.pubads().setTargeting("isAdvertorial", typeof(isAdvertorial = kmklabs.article && kmklabs.article.isAdvertorial.toString()) === "undefined" ? "false" : isAdvertorial);
        googletag.pubads().setTargeting("isMultipage", typeof(isMultipage = kmklabs.article && kmklabs.article.isMultipage.toString()) === "undefined" ? "false" : isMultipage);
        googletag.pubads().setTargeting("articleId", kmklabs.gtm.articleId.toString());
        googletag.pubads().setTargeting("pagingNum", typeof(pageParam = kmklabs.gtm.pageParam && kmklabs.gtm.pageParam.toString()) === "undefined" ? "false" : pageParam);
        googletag.pubads().setTargeting("newExp", typeof(newExp = kmklabs.gtm.new_exp) === "undefined" ? "false" : kmklabs.gtm.new_exp.toString());
        googletag.pubads().setTargeting("site", kmklabs.site);
        googletag.pubads().setTargeting("age", typeof(age = kmklabs.gtm.age) === "undefined" ? "false" : kmklabs.gtm.age.toString());
        googletag.pubads().setTargeting("gender", typeof(gender = kmklabs.gtm.gender) === "undefined" ? "false" : kmklabs.gtm.gender.toString());
        googletag.pubads().setTargeting("subcategory", kmklabs.gtm.subCategory);
        /*  END TARGETING BLOCK   */

        googletag.pubads().setCentering(true);
        googletag.pubads().enableSingleRequest();
        googletag.pubads().collapseEmptyDivs();
        googletag.pubads().disableInitialLoad();
      	if(!GAMTurnOffAds){
          googletag.enableServices();
        }
      
        /* REFRESH ON DEMAND */
        if (!_IS_IOS_) {
            googletag.pubads().refresh([window.GAMLibrary.interstitial]);
        }
        googletag.pubads().refresh([window.GAMLibrary.showcase, window.GAMLibrary.exposer1, window.GAMLibrary.topframe, window.GAMLibrary.slideup, window.GAMLibrary.insertion, window.GAMLibrary.crmOrganic1, window.GAMLibrary.crmOrganic2, window.GAMLibrary.crmOrganic3, window.GAMLibrary.pictureFirst, window.GAMLibrary.inreadnative, window.GAMLibrary.widget]);

        // GAMLibrary.manageAdRefresh([
        //   	{ name: "showcase", interval: 30000 },
        //     { name: "exposer1", interval: 30000 },
        // ]);
    });

    /** GET MESSAGE FROM SAFEFRAME CONTAINER */
    GAMLibrary.onMessageReceivedGPTUpdateCreativeStyle();
    /** GET MESSAGE FROM SAFEFRAME CONTAINER */

    var HeavyAdsResolver = new GAMLibrary.HeavyAdsResolver();
    
    /* ============ HEADLINE STICKY - DEFAULT 7s ============ */
    var headlineStickyInterval = 7,
        headlineStickyStatus = !1,
        headlineStickyPaused = !1;
    headlineStickyCounterStatus = !1;

    /*------------------ VERSI 2 ----------------------*/
    function headlineStickyV2(a) {
        null != a && (headlineStickyInterval = a);
        var b = document.getElementById("div-gpt-ad-fimela-hl-1"),
            c = document.createElement("div");
        !document.getElementById("div-gpt-ad-fimela-hl-shadow") ? (c.setAttribute("id", "div-gpt-ad-fimela-hl-shadow"), b.parentElement.insertBefore(c, b)) : '', injectStickyStyleAndAnimationV2(), window.addEventListener("scroll", headlineStickyScrollEventV2)
    }

    function headlineStickyScrollEventV2() {
        if (!GAMLibrary.hlStickyActive) {
            window.removeEventListener("scroll", headlineStickyScrollEventV2);
            return;
        }

        var a = document.getElementById("div-gpt-ad-fimela-hl-1").firstElementChild,
            b = document.getElementById("div-gpt-ad-fimela-hl-shadow").getBoundingClientRect().top,
            c = document.querySelector(".layout__nav-content"),
            d = document.querySelector(".share-main");
        document.documentElement.scrollTop || document.body.scrollTop;
        headlineStickyStatus?b<=0?(!c.classList.contains("layout__nav-content--no-hanging")||d?a.classList.add("hl-navbar-hanging"):a.classList.remove("hl-navbar-hanging"),headlineStickyPaused=!1):(a.classList.remove("hl-active-sticky"),a.classList.remove("hl-navbar-hanging"),headlineStickyStatus=!(headlineStickyPaused=!0)):b<=0&&(a.classList.add("hl-active-sticky"),headlineStickyCounterStatus||(headlineStickyCounterStatus=!0,removeStickyHeadlineV2(a,!1)),headlineStickyStatus=!0);
    }

    function removeStickyHeadlineV2(a, b) {
        var c = setInterval(function() {
            headlineStickyPaused || (0 >= headlineStickyInterval ? (a.classList.remove("hl-active-sticky"), a.classList.remove("hl-navbar-hanging"), a.style.margin = "10px 0", clearInterval(c), window.removeEventListener("scroll", headlineStickyScrollEventV2)) : headlineStickyInterval--)
        }, 1e3);
        !headlineStickyPaused && b && (clearInterval(c), a.classList.remove("hl-active-sticky"), a.classList.remove("hl-navbar-hanging"))
    }

    function injectStickyStyleAndAnimationV2() {
        var a = document.createElement("style");
        a.textContent = "\n\t\t.hl-active-sticky {\n\t\t\tposition: fixed;\n\t\t\ttop: -100%;\n\t\t\tz-index: 9999;\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\tmargin: 0;\n\t\t\ttransition : margin-top .5s ease;\n\t\t\tanimation: hlSlideDown .5s forwards;\n\t\t}\n\n\t\t.hl-navbar-hanging{\n\t\t\tmargin-top : 5px !important;\n\t\t}\n\n\t\t@keyframes hlSlideDown{\n\t\t\t0%{top : -100px;}\n\t\t\t100%{top : 0px;}\n\t\t}\n\t\t.headline_ad__box {display: flex;justify-content: center;align-items: center;}", document.head.appendChild(a)
    }
    /*------------------ VERSI 2 ----------------------*/
    
    function headlineSticky(a) {
        null != a && (headlineStickyInterval = a);
        var b = document.getElementById("div-gpt-ad-fimela-hl-1"),
            c = document.createElement("div");
        c.setAttribute("id", "div-gpt-ad-fimela-hl-1-shadow"), b.parentElement.insertBefore(c, b), injectStickyStyleAndAnimation(), window.addEventListener("scroll", headlineStickyScrollEevent)
    }

    function headlineStickyScrollEevent() {
        var a = document.getElementById("div-gpt-ad-fimela-hl-1").firstElementChild,
            b = document.getElementById("div-gpt-ad-fimela-hl-1-shadow").getBoundingClientRect().top;
        document.documentElement.scrollTop || document.body.scrollTop;
        headlineStickyStatus ? 0 >= b ? (a.classList.add("hl-navbar-hanging"), headlineStickyPaused = !1) : (a.classList.remove("hl-active-sticky"), a.classList.remove("hl-navbar-hanging"), a.style.margin = "10px 0", headlineStickyPaused = !0, headlineStickyStatus = !1) : 0 >= b && (a.classList.add("hl-active-sticky"), !headlineStickyCounterStatus && (headlineStickyCounterStatus = !0, removeStickyHeadline(a, !1)), headlineStickyStatus = !0)
    }

    function removeStickyHeadline(a, b) {
        var c = setInterval(function() {
            headlineStickyPaused || (0 >= headlineStickyInterval ? (a.classList.remove("hl-active-sticky"), a.classList.remove("hl-navbar-hanging"), a.style.margin = "10px 0", clearInterval(c), window.removeEventListener("scroll", headlineStickyScrollEevent)) : headlineStickyInterval--)
        }, 1e3);
        !headlineStickyPaused && b && (clearInterval(c), a.classList.remove("hl-active-sticky"), a.classList.remove("hl-navbar-hanging"))
    }

    function injectStickyStyleAndAnimation() {
        var a = document.createElement("style");
        a.textContent = "\n\t\t.hl-active-sticky {\n\t\t\tposition: fixed;\n\t\t\ttop: -100%;\n\t\t\tz-index: 9999;\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(-50%);\n\t\t\tmargin: 0;\n\t\t\ttransition : margin-top .5s ease;\n\t\t\tanimation: hlSlideDown .5s forwards;\n\t\t}\n\n\t\t.hl-navbar-hanging{\n\t\t\tmargin-top : 5px !important;\n\t\t}\n\n\t\t@keyframes hlSlideDown{\n\t\t\t0%{top : -100px;}\n\t\t\t100%{top : 0px;}\n\t\t}\n\t\t.headline_ad__box {display: flex;justify-content: center;align-items: center;}", document.head.appendChild(a)
    }
    /* ============ HEADLINE STICKY - DEFAULT 7s ============ */
</script>
<!-- END DFP GPT TAG -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8413700652631137" crossorigin="anonymous"></script>

<script>
    document.addEventListener("DOMContentLoaded", _INIT_STICKY_TOPFRAME_);

    function _INIT_STICKY_TOPFRAME_() {
        _PARENT_BODY_ = document.querySelector("body");
        _TOPFRAME_PARENT_WRAPPER_ = document.querySelector(".layout__ads");
        _TOPFRAME_WRAPPER_ = document.querySelector("#div-gpt-ad-topfrm-parallax-wrapper");
        document.querySelector("#back-to-top").style = '';
        document.addEventListener("scroll", _TOPFRAME_STICKY_SCROLL_);

        _TOPFRAME_STICKY_IS_READY_ = true;
    }

    window.addEventListener("orientationchange", _ORIENTATION_CHANGE_);

    function _ORIENTATION_CHANGE_() {
        _ORINETATION_ = (_IS_IOS_) ? window.orientation : screen.orientation.angle;
        if (_ORINETATION_ == 0) {
            return;
        }
        _turnOff_ = true;
        _UNSET_TOPFRAME_STICKY_();
    }


    function _TOPFRAME_STICKY_SCROLL_() {
        if (_TOPFRAME_STICKY_) {
            var _scrolltop_ = document.documentElement.scrollTop;
            if (_scrolltop_ >= 0 && "v7" == _TOPFRAME_STICKY_TYPE_) {
                _TOPFRAME_STICKY_STYLE_();
                _TOPFRAME_STICKY_ = false;
                _TOPFRAME_PARENT_WRAPPER_.classList.add("sticky");
                _TOPFRAME_WRAPPER_.classList.add("sticky");
                _TOPFRAME_STICKY_COUNTDOWN_();
                document.removeEventListener("scroll", _TOPFRAME_STICKY_SCROLL_);
                if (document.querySelector('.topframe_is_sticky') !== null) {
                    document.querySelector('.topframe_is_sticky').classList.add('sticky_on'); // new additional
                }
                document.querySelector("#back-to-top").classList.add("topframe_is_sticky");
                $('.layout.topframe_is_sticky').moveIt();
            }
        }
    }

    function _UNSET_TOPFRAME_STICKY_() {
        document.removeEventListener("scroll", _TOPFRAME_STICKY_SCROLL_);
        _TOPFRAME_STICKY_END_ = true;
        _TOPFRAME_STICKY_CUSTOM_STYLE_.remove();
        if (_TOPFRAME_PARENT_WRAPPER_ !== null) {
            _TOPFRAME_PARENT_WRAPPER_.classList.remove("sticky");
        }
        if (_TOPFRAME_WRAPPER_ !== null) {
            _TOPFRAME_WRAPPER_.classList.remove("sticky");
        }

        document.querySelector('#back-to-top').classList.remove('sticky_on'); // new additional
        document.querySelector("#back-to-top").classList.remove("topframe_is_sticky");

        setTimeout(function() {
            document.querySelector("body").style = '';
            document.querySelector("#back-to-top").style = '';
            if (_TOPFRAME_PARENT_WRAPPER_ !== null) {
                _TOPFRAME_PARENT_WRAPPER_.style = '';
            }
            /*document.documentElement.scrollTo(0, _TOPFRAME_STICKY_LAST_SCROLL_END_);*/
        }, 200);
    }

    function _TOPFRAME_STICKY_COUNTDOWN_() {
        _TOPFRAME_STICKY_LAST_SCROLL_ = document.documentElement.scrollTop;
        var _target_ = document.querySelector(".layout__ads .topframe-sticky-counter");
        var countdown = setInterval(function() {

            _target_.textContent = `Penawaran sponsor berakhir setelah (${_TOPFRAME_STICKY_TIME_})`;
            if (_TOPFRAME_STICKY_TIME_ <= 0 || _turnOff_) {
                _TOPFRAME_PARENT_WRAPPER_.style.top = '-100vh';
                _TOPFRAME_PARENT_WRAPPER_.style.transition = 'top .5s ease';

                setTimeout(function() {
                    _UNSET_TOPFRAME_STICKY_();
                }, 700);
                clearInterval(countdown);
                _target_.remove();
            }
            _TOPFRAME_STICKY_TIME_--;
        }, 1000);

    }

    function checkScrollDirectionIsUp(event) {
        if (event.wheelDelta) {
            return event.wheelDelta > 0;
        }
        return event.deltaY < 0;
    }

    $.fn.moveIt = function() {
        if (_TOPFRAME_STICKY_END_) {
            return;
        }
        var $window = $(window);
        var instances = [];

        $(this).each(function() {
            instances.push(new moveItItem($(this)));
        });

        window.addEventListener('scroll', function() {
            if (!_TOPFRAME_STICKY_END_) {
                var scrollTop = $window.scrollTop();
                instances.forEach(function(inst) {
                    inst.update(scrollTop);
                });
            }
        }, {
            passive: true
        });
    };

    var moveItItem = function(el) {
        this.el = $(el);
        this.speed = parseInt(_TOPFRAME_STICKY_SCROLL_SPEED_);
    };

    moveItItem.prototype.update = function(scrollTop) {
        _TOPFRAME_STICKY_LAST_SCROLL_END_ = _TOPFRAME_STICKY_LAST_SCROLL_ + (scrollTop / (this.speed / 4));
        this.el.css('transform', 'translateY(' + -(_TOPFRAME_STICKY_LAST_SCROLL_END_) + 'px)');
        _TOPFRAME_PARENT_WRAPPER_.style.transform = 'translateY(' + (_TOPFRAME_STICKY_LAST_SCROLL_END_) + 'px)';

    };

    function _TOPFRAME_STICKY_STYLE_() {
        var _P_ = document.createElement("p");
        _P_.classList.add("topframe-sticky-counter");
        _P_.textContent = "Penawaran sponsor berakhir setelah (7)";
        _TOPFRAME_PARENT_WRAPPER_.appendChild(_P_)
        var _H_ = document.querySelector("body").clientHeight;
        // new additional 
        //update layout.topframe_is_sticky to layout.topframe_is_sticky.sticky_on
        _TOPFRAME_STICKY_CUSTOM_STYLE_.textContent = `
                    body{height: ${(_H_ * 20)}px;scroll-behavior: smooth;}
                            .layout.topframe_is_sticky.sticky_on::before {content: "";position: relative;height: 110.41666666666667vw !important;display: block;}
                            .layout.topframe_is_sticky{position:fixed ; top : 0px; left:0px;transition: all 1s ease;}
                            .layout__ads{
                    transition: all 1s ease;
                }
                .layout__ads .topframe-sticky-counter {display : none;}
                .layout__ads.sticky {
                    position: fixed;
                    z-index: 99;
                    height: calc(100vw *(267 / 414) + 25px );
                }
                .layout__ads.sticky::after ,
                .layout__ads.sticky::before {
                    position: fixed;
                    height: 25px;
                    width: 100vw;
                    left: 0;
                }
                .layout__ads.sticky::after {
                    content: "";
                    top: calc(100vw *(267 / 414) );
                    background: #0072FF;
                    z-index: 100;
                    animation: progress-bar 7s forwards linear;
                }
                .layout__ads.sticky::before {
                    content: "";
                    top: calc(100vw *(267 / 414) );
                    background: #212121;
                    z-index: 99;
                }
                .layout__ads.sticky .topframe-sticky-counter {
                    display : block;
                    top: calc((100vw *(267 / 414) ) + 8px);
                    color : #fff;
                    line-height : 14px;
                    z-index: 101;
                    -webkit-animation: webkit-progress-count 7s forwards linear;
                    animation: progress-count 7s forwards linear;
                    width: 100%;
                        margin: 0px;
                        position: absolute;
                }
                div#div-gpt-ad-topfrm-parallax-wrapper,
                div#div-gpt-ad-topfrm-parallax-wrapper.sticky #div-gpt-ad-fimela-topfrm iframe {
                    transition: all .3s ease;
                }
                div#div-gpt-ad-topfrm-parallax-wrapper.sticky {
                    height: calc(100vw *(267 / 414)) !important;
                    position: relative !important;
                    top: 0px;
                }
                div#div-gpt-ad-topfrm-parallax-wrapper.sticky #div-gpt-ad-fimela-topfrm iframe {
                    transform: scale(.55);
                    top: calc((-110.41666666666667vw * .42) / 2) !important;
                }
                @keyframes progress-bar{
                    from {width: 0px;}
                    to{width: 100vw;}
                }
                `;
        document.querySelector("#back-to-top").appendChild(_TOPFRAME_STICKY_CUSTOM_STYLE_);
    }

    // TOPFRAME SHRINKING V8
    function _SET_STICKY_v2_SCROLL_() {
        if( _TOPFRAME_STICKY_TYPE_ != "v8"){
            window.removeEventListener("scroll", _SET_STICKY_v2_SCROLL_)
            return
        }

        var _scrollTop_ = window.document.scrollingElement.scrollTop || window.document.documentElement.scrollTop
        if (_scrollTop_ == 0 && _adsvisible_.topframeClassTweak) {
            _adsvisible_.topframeScrollBackToTop = true
        }

        if ((document.documentElement.scrollTop > (document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).clientHeight / 3)) && !_adsvisible_.topframeClassTweak && _TOPFRAME_STICKY_ && !_TOPFRAME_STICKY_END_) {
            _SET_STICKY_V2_STYLE_()
            _adsvisible_.topframeClassTweak = true;
            _SET_STICKY_V2_()
        }
    }

    function _SET_STICKY_V2_() {
        if(document.querySelector(".topframe-sticky-counter")){
            document.querySelector(".topframe-sticky-counter").remove()
        }

        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).classList.add("puller")
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).style = "position : fixed !important;top : -60px !important;"
        document.querySelector(".layout__content").style.zIndex = "0"

        if(_TOPFRAME_STICKY_END_){
            document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).style.opacity = 0;
            return;
        }

        var _COUNTDOWN_STICKY_V2_NUMBER = 0
        var _COUNTDOWN_STICKY_V2 = setInterval(() => {
            if (_COUNTDOWN_STICKY_V2_NUMBER >= 75 || _adsvisible_.topframeScrollBackToTop && !_TOPFRAME_STICKY_END_) {
                clearInterval(_COUNTDOWN_STICKY_V2)
                _adsvisible_.topframe = true
                _TOPFRAME_STICKY_END_ = true
                _UNSET_STICKY_V2_()
            }

            _COUNTDOWN_STICKY_V2_NUMBER++;
        }, 100);
    }

    function _UNSET_STICKY_V2_(){
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).classList.remove("puller")
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).style.setProperty("position", "relative", "important");
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).style.setProperty("top", "");
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).style.opacity = 1;
        document.querySelector(".layout__content").style.zIndex = "unset"
        window.removeEventListener("scroll", _SET_STICKY_v2_SCROLL_)
    }

    function _SET_STICKY_V2_STYLE_() {
        _TOPFRAME_STICKY_CUSTOM_STYLE_.textContent  = `div${_TOPFRAME_STICKY_ADUNIT_TARGET_}.puller { position: fixed !important; z-index: 999; transform: scale(.55) translateX(38%); border-radius: 20px; overflow: hidden; } div${_TOPFRAME_STICKY_ADUNIT_TARGET_}.puller::after { content: ""; position: absolute; height: 5px; width: 100%; background: yellow; left: 0; animation: tf-puller-loading 7s forwards; } @keyframes tf-puller-loading { 0% { width: 0px } 100% { width: 100% } }`
        document.querySelector(_TOPFRAME_STICKY_ADUNIT_TARGET_).appendChild(_TOPFRAME_STICKY_CUSTOM_STYLE_)
    }
    // TOPFRAME SHRINKING V8
if (typeof gamAddAnimationHeader !== 'function') {
  var gamKmksitMenuBar = document.querySelector(".layout__nav-content");
  function gamAddAnimationHeader() {
      gamKmksitMenuBar.style.transition = 'all .5s ease';
  }
}
</script>
